function LEvent(a){this.eventType=a;this._ll_preventDefault=!1}function LStageAlign(){throw"LStageAlign cannot be instantiated";}function LStageScaleMode(){throw"LStageScaleMode cannot be instantiated";}
function trace(){if(LGlobal.traceDebug){var a,c=document.getElementById("traceObject");0<trace.arguments.length&&null==c&&(c=document.createElement("TEXTAREA"),c.id="traceObject",c.style.position="absolute",c.style.top=LGlobal.height+20+"px",c.style.width=LGlobal.width+"px",c.style.height="200px",document.body.appendChild(c));for(a=0;a<trace.arguments.length;a++)c.value=c.value+trace.arguments[a]+"\r\n",c.scrollTop=c.scrollHeight}}function addChild(a){LGlobal.stage.addChild(a)}
function removeChild(a){LGlobal.stage.removeChild(a)}
function init(a,c,b,d,g,h){var f,k;LGlobal.speed=a;f=function(){LGlobal.canTouch&&LGlobal.aspectRatio==LANDSCAPE&&window.innerWidth<window.innerHeight?LGlobal.horizontalError():LGlobal.canTouch&&LGlobal.aspectRatio==PORTRAIT&&window.innerWidth>window.innerHeight?LGlobal.verticalError():setTimeout(g,100);LGlobal.startTimer=(new Date).getTime()};"function"==typeof a?(LGlobal.setCanvas(c,b,d),f(),k=function(){a(k);LGlobal.onShow()}):k=function(){LGlobal.frameRate=setInterval(function(){LGlobal.onShow()},
a);LGlobal.setCanvas(c,b,d);f()};null!=h&&h==LEvent.INIT?k():LEvent.addEventListener(window,"load",function(){k()})}
function base(a,c,b){var d=null,g=a.constructor.prototype,h={};"Object"==a.constructor.name&&console.warn("When you use the extends. You must make a method like 'XX.prototype.xxx=function(){}'. but not 'XX.prototype={xxx:function(){}}'.");typeof a.__ll__parent__==UNDEFINED&&(a.__ll__parent__=[],a.__ll__parent__=[]);a.__ll__parent__.push(c.prototype);for(d in g)h[d]=1;for(d in c.prototype)h[d]||(g[d]=c.prototype[d]);g.toString==Object.prototype.toString&&(g.toString=LObject.prototype.toString);c.apply(a,
b)}function getTimer(){return(new Date).getTime()-LGlobal.startTimer}function getExtension(a){var c;return c=a.match(/([^#?]+\.)([^.#?]+)/),3<=c.length?c[2].toLowerCase():null}function LBlendMode(){throw"LBlendMode cannot be instantiated";}
var mouseX,mouseY,LMouseEvent,LMultitouchInputMode,LMultitouch,LTextEvent,LFocusEvent,LMouseEventContainer,LKeyboardEvent,LAccelerometerEvent,LGlobal,LSystem,LStage,LInit,LExtends,LObject,LColorTransform,LTransform,LMatrix,LVec2,LEventDispatcher,LDisplayObject,LInteractiveObject,LDisplayObjectContainer,LLoader,LURLLoader,LWebAudio,LMedia,LSound,LVideo,LPoint,LRectangle,LGraphics,LShape,LSprite,LButton,LTextFieldType,LTextField,LBitmap,LBitmapData,LDropShadowFilter,LAnimation,LAnimationTimeline,LLoadManage,
LEasing,Quad,Cubic,Quart,Quint,Sine,Strong,Expo,Circ,Elastic,Back,Bounce,LTweenLiteTimeline,LTweenLite,LAjax,LStageWebView,FPS,OS_PC="pc",OS_IPHONE="iPhone",OS_IPOD="iPod",OS_IPAD="iPad",OS_ANDROID="Android",OS_WINDOWS_PHONE="Windows Phone",OS_BLACK_BERRY="BlackBerry",NONE="none",UNDEFINED="undefined",LANDSCAPE="landscape",PORTRAIT="portrait";LEvent.prototype.preventDefault=function(){this._ll_preventDefault=!0};LEvent.INIT="init";LEvent.COMPLETE="complete";LEvent.ENTER_FRAME="enter_frame";
LEvent.WINDOW_RESIZE="resize";LEvent.SOUND_COMPLETE="sound_complete";LEvent.END_CONTACT="endContact";LEvent.PRE_SOLVE="preSolve";LEvent.POST_SOLVE="postSolve";LEvent.BEGIN_CONTACT="beginContact";LEvent.addEventListener=function(a,c,b,d){null==d&&(d=!1);a.addEventListener?a.addEventListener(c,b,d):a.attachEvent&&(a["e"+c+b]=b,a[c+b]=function(){a["e"+c+b]()},a.attachEvent("on"+c,a[c+b]))};
LEvent.removeEventListener=function(a,c,b,d){null==d&&(d=!1);a.removeEventListener?a.removeEventListener(c,b,d):a.detachEvent&&(a["e"+c+b]=b,a[c+b]=function(){a["e"+c+b]()},a.detachEvent("on"+c,a[c+b]))};LMouseEvent=function(){throw"LMouseEvent cannot be instantiated";};LMouseEvent.MOUSE_DOWN="mousedown";LMouseEvent.MOUSE_UP="mouseup";LMouseEvent.TOUCH_START="touchstart";LMouseEvent.TOUCH_MOVE="touchmove";LMouseEvent.TOUCH_END="touchend";LMouseEvent.MOUSE_MOVE="mousemove";LMouseEvent.MOUSE_OVER="mouseover";
LMouseEvent.MOUSE_OUT="mouseout";LMouseEvent.DOUBLE_CLICK="dblclick";LMultitouchInputMode=function(){throw"LMultitouchInputMode cannot be instantiated";};LMultitouchInputMode.NONE="none";LMultitouchInputMode.GESTURE="gesture";LMultitouchInputMode.TOUCH_POINT="touchPoint";LMultitouch=function(){throw"LMultitouch cannot be instantiated";};LMultitouch.inputMode="none";LMultitouch.touchs=[];LTextEvent=function(){throw"LTextEvent cannot be instantiated";};LTextEvent.TEXT_INPUT="textInput";
LTextEvent.WIND_COMPLETE="windComplete";LFocusEvent=function(){throw"LFocusEvent cannot be instantiated";};LFocusEvent.FOCUS_IN="focusIn";LFocusEvent.FOCUS_OUT="focusOut";
LMouseEventContainer=function(){function a(){this.container={};this.dispatchAllEvent=!1;this.mouseDownContainer=[];this.mouseUpContainer=[];this.mouseMoveContainer=[];this.mouseOverContainer=[];this.mouseOutContainer=[];this.mouseDblContainer=[];this.textFieldInputContainer=[];this.buttonContainer=[]}return a.prototype={pushInputBox:function(a){var b,d,g=this.textFieldInputContainer;b=0;for(d=g.length;d>b;b++)if(a.objectIndex==g[b].objectIndex)return;this.textFieldInputContainer.push(a)},removeInputBox:function(a){var b,
d,g=this.textFieldInputContainer;b=0;for(d=g.length;d>b;b++)if(a.objectIndex==g[b].objectIndex){this.textFieldInputContainer.splice(b,1);break}},pushButton:function(a){var b,d,g=this.buttonContainer;b=0;for(d=g.length;d>b;b++)if(a.objectIndex==g[b].objectIndex)return;this.buttonContainer.push(a)},removeButton:function(a){var b,d,g=this.buttonContainer;b=0;for(d=g.length;d>b;b++)if(a.objectIndex==g[b].objectIndex){this.buttonContainer.splice(b,1);break}},dispatchEventButton:function(a){var b,d;d=this.buttonContainer;
b=0;for(d=d.length;d>b;b++)"function"==typeof this.buttonContainer[b].ll_button_mode&&this.buttonContainer[b].ll_button_mode(a)},addEvent:function(a,b,d){b.push({container:a,listener:d})},removeEvent:function(a,b,d){var g,h;g=0;for(h=b.length;h>g;g++)if(b[g].container.objectIndex===a.objectIndex&&(!d||b[g].listener==d)){b.splice(g,1);break}},addMouseDownEvent:function(a,b){this.addEvent(a,this.mouseDownContainer,b)},addMouseUpEvent:function(a,b){this.addEvent(a,this.mouseUpContainer,b)},addMouseMoveEvent:function(a,
b){this.addEvent(a,this.mouseMoveContainer,b)},addMouseOverEvent:function(a,b){this.addEvent(a,this.mouseOverContainer,b)},addMouseOutEvent:function(a,b){this.addEvent(a,this.mouseOutContainer,b)},addMouseDblEvent:function(a,b){this.addEvent(a,this.mouseDblContainer,b)},addMouseEvent:function(a,b,d){b==LMouseEvent.MOUSE_DOWN?this.addMouseDownEvent(a,d):b==LMouseEvent.MOUSE_UP?this.addMouseUpEvent(a,d):b==LMouseEvent.MOUSE_OVER?this.addMouseOverEvent(a,d):b==LMouseEvent.MOUSE_OUT?this.addMouseOutEvent(a,
d):b==LMouseEvent.MOUSE_MOVE?this.addMouseMoveEvent(a,d):this.addMouseDblEvent(a,d)},hasEventListener:function(a,b,d){var g,h;b=b==LMouseEvent.MOUSE_DOWN?this.mouseDownContainer:b==LMouseEvent.MOUSE_UP?this.mouseUpContainer:b==LMouseEvent.MOUSE_OVER?this.mouseOverContainer:b==LMouseEvent.MOUSE_OUT?this.mouseOutContainer:b==LMouseEvent.MOUSE_MOVE?this.mouseMoveContainer:this.mouseDblContainer;g=0;for(h=b.length;h>g;g++)if(b[g].container.objectIndex===a.objectIndex&&(!d||b[g].listener==d))return!0;
return!1},removeMouseDownEvent:function(a,b){this.removeEvent(a,this.mouseDownContainer,b)},removeMouseUpEvent:function(a,b){this.removeEvent(a,this.mouseUpContainer,b)},removeMouseMoveEvent:function(a,b){this.removeEvent(a,this.mouseMoveContainer,b)},removeMouseOverEvent:function(a,b){this.removeEvent(a,this.mouseOverContainer,b)},removeMouseOutEvent:function(a,b){this.removeEvent(a,this.mouseOutContainer,b)},removeMouseDblEvent:function(a,b){this.removeEvent(a,this.mouseDblContainer,b)},removeMouseEvent:function(a,
b,d){b==LMouseEvent.MOUSE_DOWN?this.removeMouseDownEvent(a,d):b==LMouseEvent.MOUSE_UP?this.removeMouseUpEvent(a,d):b==LMouseEvent.MOUSE_OVER?this.removeMouseOverEvent(a,d):b==LMouseEvent.MOUSE_OUT?this.removeMouseOutEvent(a,d):b==LMouseEvent.MOUSE_MOVE?this.removeMouseMoveEvent(a,d):this.removeMouseDblEvent(a,d)},dispatchMouseEvent:function(a,b){b==LMouseEvent.MOUSE_DOWN?(this.dispatchEvent(a,this.mouseDownContainer,LMouseEvent.MOUSE_DOWN),this.dispatchEvent(a,this.textFieldInputContainer)):b==LMouseEvent.MOUSE_UP?
this.dispatchEvent(a,this.mouseUpContainer,LMouseEvent.MOUSE_UP):b==LMouseEvent.DOUBLE_CLICK?this.dispatchEvent(a,this.mouseDblContainer,LMouseEvent.DOUBLE_CLICK):(this.dispatchEventButton(a),this.dispatchEvent(a,this.mouseOutContainer,LMouseEvent.MOUSE_OUT),this.dispatchEvent(a,this.mouseOverContainer,LMouseEvent.MOUSE_OVER),this.dispatchEvent(a,this.mouseMoveContainer,LMouseEvent.MOUSE_MOVE))},getRootParams:function(a){a=a.parent;for(var b={x:0,y:0,scaleX:1,scaleY:1};a&&"root"!=a;)b.x*=a.scaleX,
b.y*=a.scaleY,b.x+=a.x,b.y+=a.y,b.scaleX*=a.scaleX,b.scaleY*=a.scaleY,a=a.parent;return b},_mouseEnabled:function(a){if(!a||!a.parent||!a.visible||typeof a.mouseEnabled!=UNDEFINED&&!a.mouseEnabled)return!1;for(a=a.parent;a&&"root"!=a;)if(!(a.mouseEnabled&&a.mouseChildren&&a.visible&&(a=a.parent,a)))return!1;return!0},_dispatchEvent:function(a,b,d,g,h,f){for(var k=d.length;f>=h&&k>h;h++)o=d[h],o.sp.objectIndex==g&&(a.currentTarget=a.clickTarget=o.sp,a.target||(a.target=o.sp),a.event_type=b,a.selfX=
(a.offsetX-o.co.x-o.sp.x)/(o.co.scaleX*o.sp.scaleX),a.selfY=(a.offsetY-o.co.y-o.sp.y)/(o.co.scaleY*o.sp.scaleY),o.listener(a,o.sp))},dispatchEvent:function(a,b,d){var g,h,f,k,e,m,n=[];k=0;for(e=b.length;e>k;k++)if(g=b[k].container||b[k],this._mouseEnabled(g))(h=this.getRootParams(g),d||!g.mouseEvent)?g.ismouseon(a,h)?d==LMouseEvent.MOUSE_OUT||d==LMouseEvent.MOUSE_OVER&&g.ll_mousein||(d!=LMouseEvent.MOUSE_UP&&(g.ll_mousein=!0),n.push({sp:g,co:h,listener:b[k].listener})):d!=LMouseEvent.MOUSE_OUT&&d!=
LMouseEvent.MOUSE_OVER||!g.ll_mousein||(g.ll_mousein=!1,n.push({sp:g,co:h,listener:b[k].listener})):g.mouseEvent(a,LMouseEvent.MOUSE_DOWN,h);if(0!=n.length)for(1<n.length&&(n=n.sort(this._sort.bind(this))),e=n.length,k=0;e>k;k++)if(f=n[k],this._dispatchEvent(a,d,n,f.sp.objectIndex,k,this.dispatchAllEvent?e-1:k),k<n.length-1&&f.sp.objectIndex==n[k+1].sp.objectIndex)n.splice(k,1),k--;else{for(;(m||(m=f.sp.parent,a.target=f.sp),m&&"root"!=m)&&(this._dispatchEvent(a,d,n,m.objectIndex,k+1,e),a.target=
m,m=m.parent,m&&"root"!=m););if(!this.dispatchAllEvent)break}},set:function(a,b){this.container[a]=b},_sort:function(a,b){var d,g,h,f,k,e=this._getSort(a.sp),m=this._getSort(b.sp);h=0;f=e.length;for(k=m.length;f>h&&k>h;h++)if(d=e[h],g=m[h],d.objectIndex!=g.objectIndex)return g.parent.getChildIndex(g)-d.parent.getChildIndex(d);return m.length-e.length},_getSort:function(a){var b=a.parent;for(a=[a];b&&"root"!=b;)a.unshift(b),b=b.parent;return a}},new a}();
LKeyboardEvent=function(){throw"LKeyboardEvent cannot be instantiated";};LKeyboardEvent.KEY_DOWN="keydown";LKeyboardEvent.KEY_UP="keyup";LKeyboardEvent.KEY_PRESS="keypress";LAccelerometerEvent=function(){throw"LAccelerometerEvent cannot be instantiated";};LAccelerometerEvent.DEVICEMOTION="devicemotion";LStageAlign.TOP="T";LStageAlign.BOTTOM="B";LStageAlign.LEFT="L";LStageAlign.RIGHT="Re";LStageAlign.TOP_LEFT="TL";LStageAlign.TOP_RIGHT="TR";LStageAlign.TOP_MIDDLE="TM";LStageAlign.BOTTOM_LEFT="BL";
LStageAlign.BOTTOM_RIGHT="BR";LStageAlign.BOTTOM_MIDDLE="BM";LStageAlign.MIDDLE="M";LStageScaleMode.EXACT_FIT="exactFit";LStageScaleMode.SHOW_ALL="showAll";LStageScaleMode.NO_BORDER="noBorder";LStageScaleMode.NO_SCALE="noScale";
LStage=LSystem=LGlobal=function(){function a(){throw"LGlobal cannot be instantiated";}return a.FULL_SCREEN="full_screen",a.traceDebug=!1,a.displayState=NONE,a.aspectRatio=NONE,a.canvasObj=null,a.canvas=null,a.webAudio=!0,a.objectIndex=1,a.stage=null,a.width=0,a.height=0,a.box2d=null,a.speed=50,a.IS_MOUSE_DOWN=!1,a.stopPropagation=!1,a.preventDefault=!0,a.childList=[],a.dragList=[],a.excludingContainer=[],a.fpsStatus=null,a.stageScale="noScale",a.align="M",a.mobile=!1,a.canTouch=!1,a.os=OS_PC,a.ios=
!1,a.android=!1,a.android_new=!1,a.backgroundColor=null,a.destroy=!0,a.forceRefresh=!1,a.devicePixelRatio=window.devicePixelRatio||1,a.startTimer=0,a.keepClear=!0,a.top=0,a.left=0,a.window=window,function(c){var b,d;b=c.toLowerCase().indexOf("firefox");b=0>b?!1:(d=c.substring(b+8,c.length),39>parseFloat(d));(a.isOldFirefox=b,0<c.indexOf(OS_IPHONE))?(a.os=OS_IPHONE,a.canTouch=!0,a.ios=!0):0<c.indexOf(OS_IPOD)?(a.os=OS_IPOD,a.canTouch=!0,a.ios=!0):0<c.indexOf(OS_IPAD)?(a.os=OS_IPAD,a.ios=!0,a.canTouch=
!0):0<c.indexOf(OS_ANDROID)?(a.os=OS_ANDROID,a.canTouch=!0,a.android=!0,d=c.indexOf(OS_ANDROID),3<parseInt(c.substr(d+8,1))&&(a.android_new=!0)):0<c.indexOf(OS_WINDOWS_PHONE)?(a.os=OS_WINDOWS_PHONE,a.canTouch=!0):0<c.indexOf(OS_BLACK_BERRY)&&(a.os=OS_BLACK_BERRY,a.canTouch=!0);a.mobile=a.canTouch}(navigator.userAgent),a.setDebug=function(c){a.traceDebug=c},a.setCanvas=function(c,b,d){a.ll_createCanvas(c,b,d);a.ll_createStage();a.displayState==LStage.FULL_SCREEN?a.resize():"number"==typeof a.displayState&&
a.resize(a.width*a.displayState,a.height*a.displayState);a.canTouch?(a.ll_clicks=0,a.ll_prev_clickTime=0,LEvent.addEventListener(a.canvasObj,LMouseEvent.TOUCH_START,a.ll_touchStart),LEvent.addEventListener(document,LMouseEvent.TOUCH_END,a.ll_touchEnd),LEvent.addEventListener(a.canvasObj,LMouseEvent.TOUCH_MOVE,a.ll_touchMove)):(LEvent.addEventListener(a.canvasObj,LMouseEvent.DOUBLE_CLICK,a.ll_mouseDbclick),LEvent.addEventListener(a.canvasObj,LMouseEvent.MOUSE_DOWN,a.ll_mouseDown),LEvent.addEventListener(a.canvasObj,
LMouseEvent.MOUSE_MOVE,a.ll_mouseMove),LEvent.addEventListener(a.canvasObj,LMouseEvent.MOUSE_UP,a.ll_mouseUp),LEvent.addEventListener(a.canvasObj,LMouseEvent.MOUSE_OUT,a.ll_mouseOut))},a.ll_createCanvas=function(c,b,d){a.id=c;a.object=document.getElementById(c);a.object.innerHTML='<div style="position:absolute;margin:0;padding:0;overflow:visible;-webkit-transform:translateZ(0);z-index:0;"><canvas id="'+a.id+'_canvas" style="margin:0;padding:0;width:'+b+"px;height:"+d+'px;"><div id="noCanvas"><p>Hey there,it looks like you\'re using Microsoft\'s Internet Explorer. Microsoft hates the Web and doesn\'t support HTML5:(</p></div></canvas></div><div id="'+
a.id+'_InputText" style="position:absolute;margin:0;padding:0;z-index:10;display:none;"><textarea rows="1" id="'+a.id+'_InputTextareaBox" style="resize:none;background:transparent;border:0px;"></textarea><input type="text" id="'+a.id+'_InputTextBox"  style="background:transparent;border:0px;"/><input type="password" id="'+a.id+'_passwordBox"  style="background:transparent;border:0px;"/></div>';a.canvasObj=document.getElementById(a.id+"_canvas");a._canvas=document.createElement("canvas");a._context=
a._canvas.getContext("2d");a._context&&(a.canvasObj.innerHTML="");a.inputBox=document.getElementById(a.id+"_InputText");a.inputTextareaBoxObj=document.getElementById(a.id+"_InputTextareaBox");a.inputTextBoxObj=document.getElementById(a.id+"_InputTextBox");a.passwordBoxObj=document.getElementById(a.id+"_passwordBox");a.inputTextField=null;b&&(a.canvasObj.width=b);d&&(a.canvasObj.height=d);a.width=a.canvasObj.width;a.height=a.canvasObj.height;a.canvasStyleWidth=a.width;a.canvasStyleHeight=a.height;
a.canvas=a.canvasObj.getContext("2d");a.offsetX=mouseX=0;a.offsetY=mouseY=0},a.ll_createStage=function(){a.stage=new LSprite;a.stage.parent="root";a.childList.push(a.stage);a.stage.baseAddEvent=a.stage.addEventListener;a.stage.baseRemoveEvent=a.stage.removeEventListener;a.stage.addEventListener=function(c,b){c==LEvent.WINDOW_RESIZE?(a.stage.onresizeListener=b,a.stage.onresize=function(d){a.stage.onresizeEvent=d},LEvent.addEventListener(a.window,c,a.stage.onresize)):c==LKeyboardEvent.KEY_DOWN||c==
LKeyboardEvent.KEY_UP||c==LKeyboardEvent.KEY_PRESS?LEvent.addEventListener(a.window,c,b):a.stage.baseAddEvent(c,b)};a.stage.removeEventListener=function(c,b){c==LEvent.WINDOW_RESIZE?(LEvent.removeEventListener(a.window,LEvent.WINDOW_RESIZE,a.stage.onresize),delete a.stage.onresize,delete a.stage.onresizeListener):c==LKeyboardEvent.KEY_DOWN||c==LKeyboardEvent.KEY_UP||c==LKeyboardEvent.KEY_PRESS?LEvent.removeEventListener(a.window,c,b):a.stage.baseRemoveEvent(c,b)};a.innerWidth=window.innerWidth;a.innerHeight=
window.innerHeight;LEvent.addEventListener(a.window,"blur",function(){a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT))})},a.ll_touchStart=function(c){var b,d,g,h,f;if(a._outStageCheckCount=1,a.IS_MOUSE_DOWN=!0,a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_IN)),a.inputBox.style.display!=NONE&&a.inputTextField._ll_getValue(),b=parseInt(0+a.object.style.left)+parseInt(a.canvasObj.style.marginLeft),d=parseInt(0+a.object.style.top)+parseInt(a.canvasObj.style.marginTop),LMultitouch.inputMode==
LMultitouchInputMode.NONE)g=a.ll_touchStartEvent(c,0,b,d);else if(LMultitouch.inputMode==LMultitouchInputMode.TOUCH_POINT)for(h=0,f=c.touches.length;f>h;h++)LMultitouch.touchs["touch"+c.touches[h].identifier]||(g=a.ll_touchStartEvent(c,h,b,d));b=(new Date).getTime();a.ll_clicks=b<=a.ll_prev_clickTime+500?a.ll_clicks+1:1;a.ll_prev_clickTime=b;2===a.ll_clicks&&(a.mouseEvent(g,LMouseEvent.DOUBLE_CLICK),a.ll_clicks=0);a.mouseJoint_start&&a.mouseJoint_start(g);a.touchHandler(c)},a.ll_touchStartEvent=function(c,
b,d,g){c={offsetX:c.touches[b].pageX-d,offsetY:c.touches[b].pageY-g,touchPointID:c.touches[b].identifier};return c.offsetX=a.ll_scaleX(c.offsetX),c.offsetY=a.ll_scaleY(c.offsetY),mouseX=a.offsetX=c.offsetX,mouseY=a.offsetY=c.offsetY,LMultitouch.touchs["touch"+c.touchPointID]=c,a.mouseEvent(c,LMouseEvent.MOUSE_DOWN),a.buttonStatusEvent=c,c},a.ll_touchEnd=function(c){var b,d,g,h,f,k;if(a.IS_MOUSE_DOWN=!1,LMultitouch.inputMode==LMultitouchInputMode.TOUCH_POINT)for(g in LMultitouch.touchs){b=LMultitouch.touchs[g];
k=!1;h=0;for(f=c.touches.length;f>h;h++)if(c.touches[h].identifier==b.touchPointID){k=!0;break}k||(d=b,delete LMultitouch.touchs[g],a.mouseEvent(d,LMouseEvent.MOUSE_UP))}d||(d={offsetX:a.offsetX,offsetY:a.offsetY});a.mouseEvent(d,LMouseEvent.MOUSE_UP);a.touchHandler(c);a.buttonStatusEvent=null;a.mouseJoint_end&&a.mouseJoint_end();a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT))},a.ll_touchMove=function(c){var b,d,g,h,f=c.touches.length;b=parseInt(0+a.object.style.left)+parseInt(a.canvasObj.style.marginLeft);
d=parseInt(0+a.object.style.top)+parseInt(a.canvasObj.style.marginTop);LMultitouch.inputMode==LMultitouchInputMode.NONE&&(f=1);i=0;for(h=c.touches.length;h>i&&f>i;i++)g={offsetX:c.touches[i].pageX-b,offsetY:c.touches[i].pageY-d,touchPointID:c.touches[i].identifier},g.offsetX=a.ll_scaleX(g.offsetX),g.offsetY=a.ll_scaleY(g.offsetY),mouseX=a.offsetX=g.offsetX,mouseY=a.offsetY=g.offsetY,LMultitouch.touchs["touch"+g.touchPointID]&&LMultitouch.touchs["touch"+g.touchPointID].offsetX==g.offsetX&&LMultitouch.touchs["touch"+
g.touchPointID].offsetY==g.offsetY||(a.buttonStatusEvent=g,LMultitouch.touchs["touch"+g.touchPointID]=g,a._outStageCheckCount=0>=g.offsetX||g.offsetX>=a.innerWidth||g.offsetX>=a.width||0>=g.offsetY||g.offsetY>=a.innerHeight||g.offsetY>=a.height?0:1,a.mouseEvent(g,LMouseEvent.MOUSE_MOVE));a.touchHandler(c);a.mouseJoint_move&&a.mouseJoint_move(g)},a.ll_mouseDbclick=function(c){null==c.offsetX&&null!=c.layerX&&(c.offsetX=c.layerX,c.offsetY=c.layerY);var b={button:c.button};b.offsetX=a.ll_scaleX(c.offsetX);
b.offsetY=a.ll_scaleY(c.offsetY);a.mouseEvent(b,LMouseEvent.DOUBLE_CLICK)},a.ll_mouseDown=function(c){null==c.offsetX&&null!=c.layerX&&(c.offsetX=c.layerX,c.offsetY=c.layerY);a.inputBox.style.display!=NONE&&a.inputTextField._ll_getValue();var b={button:c.button};b.offsetX=a.ll_scaleX(c.offsetX);b.offsetY=a.ll_scaleY(c.offsetY);a.mouseEvent(b,LMouseEvent.MOUSE_DOWN);a.IS_MOUSE_DOWN=!0;a.mouseJoint_start&&a.mouseJoint_start(b)},a.ll_mouseMove=function(c){null==c.offsetX&&null!=c.layerX&&(c.offsetX=
c.layerX,c.offsetY=c.layerY);var b={};b.offsetX=a.ll_scaleX(c.offsetX);b.offsetY=a.ll_scaleY(c.offsetY);a.buttonStatusEvent=b;mouseX=a.offsetX=b.offsetX;mouseY=a.offsetY=b.offsetY;a.cursor="default";0>=mouseX||mouseX>=a.innerWidth||mouseX>=a.width||0>=mouseY||mouseY>=a.innerHeight||mouseY>=a.height?a._outStageCheckCount&&(a._outStageCheckCount=0,a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT))):a._outStageCheckCount||(a._outStageCheckCount=1,a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_IN)));
a.mouseEvent(b,LMouseEvent.MOUSE_MOVE);document.body.style.cursor=a.cursor;a.mouseJoint_move&&a.mouseJoint_move(b)},a.ll_mouseUp=function(c){null==c.offsetX&&null!=c.layerX&&(c.offsetX=c.layerX,c.offsetY=c.layerY);var b={button:c.button};b.offsetX=a.ll_scaleX(c.offsetX);b.offsetY=a.ll_scaleY(c.offsetY);a.mouseEvent(b,LMouseEvent.MOUSE_UP);a.IS_MOUSE_DOWN=!1;a.mouseJoint_end&&a.mouseJoint_end()},a.ll_mouseOut=function(c){null==c.offsetX&&null!=c.layerX&&(c.offsetX=c.layerX,c.offsetY=c.layerY);var b=
{};b.offsetX=a.ll_scaleX(c.offsetX);b.offsetY=a.ll_scaleY(c.offsetY);a.mouseEvent(b,LMouseEvent.MOUSE_OUT);a.IS_MOUSE_DOWN=!1},a.touchHandler=function(c){return a.stopPropagation&&(c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation()),a.preventDefault&&c.preventDefault(),c},a.mouseEvent=function(c,b){if(b==LMouseEvent.MOUSE_MOVE&&a.dragHandler(c),LMouseEventContainer.container[b])return LMouseEventContainer.dispatchMouseEvent(c,b),void 0;for(var d=a.childList.length-1;0<=d&&
(!a.childList[d].mouseEvent||!a.childList[d].mouseEvent(c,b));d--);},a.dragHandler=function(c){var b,d,g=a.dragList;for(b=g.length-1;0<=b;b--)if(d=g[b],!a.canTouch||d.ll_touchPointID==c.touchPointID){b=d.getAbsoluteScale();d.x=d.ll_dragStartX+(c.offsetX-d.ll_dragMX)*d.scaleX/b.scaleX;d.y=d.ll_dragStartY+(c.offsetY-d.ll_dragMY)*d.scaleY/b.scaleY;d.dragRange&&(d.x<d.dragRange.left?d.x=d.dragRange.left:d.x>d.dragRange.right&&(d.x=d.dragRange.right),d.y<d.dragRange.top?d.y=d.dragRange.top:d.y>d.dragRange.bottom&&
(d.y=d.dragRange.bottom));break}},a._ll_mobile=function(){var c,b,d,g,h,f=.3*a.width,k,e=.05*a.width,m=.05*f,n=.15*f,q=.3*f,p=.2*1.5*f,t=new LSprite;return addChild(t),f=.3*a.width,k=1.5*f,t.graphics.drawRoundRect(1,"#000000",[e,e,f,k,e],!0,"#cccccc"),t.graphics.drawRoundRect(1,"#000000",[e+m,e+m,f-2*m,k-2*m,e],!0,"#000000"),t.graphics.drawRect(1,"#ffffff",[e+n,e+p,f-2*n,k-2*p],!0,"#ffffff"),t.graphics.drawArc(1,"#ffffff",[e+.5*f,e+k-3.5*m,1.5*m,0,2*Math.PI]),t.graphics.drawRoundRect(1,"#ffffff",
[e+q,e+n,f-2*q,m,.5*m]),c=new LSprite,c.x=.5*-(f-2*n),c.y=.5*-m,c.graphics.drawRect(1,"#ff0000",[0,0,f-2*n,m],!0,"#ff0000"),b=new LSprite,b.y=.5*-(f-2*n),b.x=.5*-m,b.graphics.drawRect(1,"#ff0000",[0,0,m,f-2*n],!0,"#ff0000"),d=new LSprite,d.x=e+q+.5*(f-2*q),d.y=e+p+.5*(k-2*p),d.rotate=45,d.addChild(c),d.addChild(b),t.addChild(d),g=new LSprite,g.graphics.drawVertices(2,"#000000",[[0,0],[n,n],[0,2*n]],!0,"#cccccc"),g.x=1.5*e+k,g.y=1.5*e+.5*k,addChild(g),t.arrow=g,h=function(){setTimeout(function(){location.href=
location.href},100)},window.onorientationchange=h,t},a.verticalError=function(){var c=.3*a.width,b=.05*a.width,d=a._ll_mobile(),g=d.clone();g.getChildAt(0).visible=!1;g.x=.5*a.width+b;addChild(g);d.rotate=90;d.x=.5*a.width+b;d.y=.5*c},a.horizontalError=function(){var c=.3*a.width,b=.05*a.width,d=a._ll_mobile(),g=d.clone();g.getChildAt(0).visible=!1;g.rotate=90;g.x=a.width-b;g.y=.5*c;addChild(g);d.arrow.x=1.5*b+c},a.onShow=function(){null!=a.canvas&&(0>=a._outStageCheckCount&&(a._outStageCheckCount--,
-2>a._outStageCheckCount&&(a.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT)),a._outStageCheckCount=1)),a.fpsStatus&&a.fpsStatus.reset(),a.stage.onresizeEvent&&(a.stage.onresizeListener(a.stage.onresizeEvent),delete a.stage.onresizeEvent),a.forceRefresh&&(a.canvasObj.width=a.canvasObj.width,a.forceRefresh=!1),a.canvas.beginPath(),null!=a.box2d?(a.box2d.ll_show(),!a.traceDebug&&a.keepClear&&a.canvas.clearRect(0,0,a.width+1,a.height+1)):(a.keepClear&&a.canvas.clearRect(0,0,a.width+1,a.height+
1),null!==a.backgroundColor&&(a.canvas.fillStyle=a.backgroundColor,a.canvas.fillRect(0,0,a.width,a.height))),a.show(a.childList))},a.show=function(a){for(var b,d=0,g=a.length;g>d;d++)(b=a[d])&&b.ll_show&&(b.ll_show(),b._ll_removeFromSelf&&(d--,g--))},a.divideCoordinate=function(a,b,d,g){var h,f;a/=g;var k=b/d,e=[];for(b=0;d>b;b++){f=[];for(h=0;g>h;h++)f.push({x:a*h,y:k*b,width:a,height:k});e.push(f)}return e},a._create_loading_color=function(){var c=a.canvas.createRadialGradient(a.width/2,a.height,
0,a.width/2,0,a.height);return c.addColorStop(0,"red"),c.addColorStop(.3,"orange"),c.addColorStop(.4,"yellow"),c.addColorStop(.5,"green"),c.addColorStop(.8,"blue"),c.addColorStop(1,"violet"),c},a.hitPolygon=function(a,b,d){var g,h,f,k,e,m=0,n=a[0],q=b<=n[0],p=d<=n[1];g=1;for(h=a.length;h+1>g;g++)f=a[g%h],k=b<=f[0],e=d<=f[1],p!=e&&(q==k?q&&(m+=p?-1:1):b<=n[0]+(f[0]-n[0])*(d-n[1])/(f[1]-n[1])&&(m+=p?-1:1)),n=f,q=k,p=e;return 0!=m},a.hitTestPolygon=function(a,b){var d,g,h,f,k,e,m,n=[[a,[],[]],[b,[],
[]]];for(g=0;g<n.length;g++){f=n[g][0];k=n[g][1];d=0;for(h=f.length;h>d;d++)n[g][2].push(new LVec2(f[d][0],f[d][1])),h-1>d&&k.push((new LVec2(f[d+1][0]-f[d][0],f[d+1][1]-f[d][1])).normL());k.push((new LVec2(f[0][0]-f[h-1][0],f[0][1]-f[h-1][1])).normL())}for(g=0;g<n.length;g++)for(k=n[g][1],d=0,h=k.length;h>d;d++)if(e=LVec2.getMinMax(n[0][2],k[d]),m=LVec2.getMinMax(n[1][2],k[d]),e.max_o<m.min_o||e.min_o>m.max_o)return!1;return!0},a.hitTestPolygonArc=function(c,b){if(a.hitPolygon(c,b[0],b[1]))return!0;
var d,g,h,f,k,e,m,n,q,p;d=0;for(h=c.length;h>d;d++)if(g=h-1>d?d+1:0,f=c[d],k=c[g],e=new LVec2(b[0]-f[0],b[1]-f[1]),m=new LVec2(k[0]-f[0],k[1]-f[1]),p=m.normalize(),q=LVec2.dot(e,p),0>=q){if(e.x*e.x+e.y*e.y<b[3])return!0}else if(q*q<m.x*m.x+m.y*m.y&&(n=LVec2.cross(e,p),n*n<b[3]))return!0;return!1},a.hitTestArc=function(a,b,d,g){var h,f,k=.5*a.getWidth(),e=.5*b.getWidth(),m=a._startX?a._startX():a.startX(),n=b._startX?b._startX():b.startX();a=a._startY?a._startY():a.startY();b=b._startY?b._startY():
b.startY();return typeof d!=UNDEFINED&&(m+=k-d,a+=k-d,k=d),typeof g!=UNDEFINED&&(n+=e-g,b+=e-g,e=g),h=m+k-n-e,f=a+k-b-e,(k+e)*(k+e)>h*h+f*f},a.hitTestRect=function(a,b,d,g){var h,f,k,e,m=a.getWidth(),n=b.getWidth(),q=a.getHeight(),p=b.getHeight(),t=a._startX?a._startX():a.startX(),r=b._startX?b._startX():b.startX();a=a._startY?a._startY():a.startY();b=b._startY?b._startY():b.startY();return typeof d!=UNDEFINED&&(t+=.5*(m-d[0]),a+=.5*(q-d[1]),m=d[0],q=d[1]),typeof g!=UNDEFINED&&(r+=.5*(n-g[0]),b+=
.5*(p-g[1]),n=g[0],p=g[1]),h=t>r?t:r,f=a>b?a:b,k=t+m>r+n?r+n:t+m,e=a+q>b+p?b+p:a+q,k>=h&&e>=f},a.hitTest=a.hitTestRect,a.setFrameRate=function(c){a.frameRate&&clearInterval(a.frameRate);a.speed=c;a.frameRate=setInterval(function(){a.onShow()},c)},a.ll_scaleX=function(c){return(c-a.left)*a.width/a.canvasStyleWidth},a.ll_scaleY=function(c){return(c-a.top)*a.height/a.canvasStyleHeight},a.ll_setStageSize=function(c,b){c=Math.ceil(c);b=Math.ceil(b);a.canvasObj.style.width=c+"px";a.canvasObj.style.height=
b+"px";a.canvasStyleWidth=c;a.canvasStyleHeight=b},a.resize=function(c,b){var d,g,h=0,f=0,k=window.innerWidth,e=window.innerHeight;switch(a.innerWidth=k,a.innerHeight=e,c&&(d=c),b&&(g=b),"noScale"==a.stageScale&&(d=c||a.width,g=b||a.height),a.stageScale){case "exactFit":d=c||k;g=b||e;break;case "noBorder":switch(d=c||k,g=b||a.height*k/a.width,a.align){case LStageAlign.BOTTOM:case LStageAlign.BOTTOM_LEFT:case LStageAlign.BOTTOM_RIGHT:case LStageAlign.BOTTOM_MIDDLE:h=e-g}break;case "showAll":k/e>a.width/
a.height?(g=b||e,d=c||a.width*e/a.height):(d=c||k,g=b||a.height*k/a.width);default:switch(a.align){case LStageAlign.BOTTOM:case LStageAlign.BOTTOM_LEFT:h=e-g;break;case LStageAlign.RIGHT:case LStageAlign.TOP_RIGHT:f=k-d;break;case LStageAlign.TOP_MIDDLE:f=.5*(k-d);break;case LStageAlign.BOTTOM_RIGHT:h=e-g;f=k-d;break;case LStageAlign.BOTTOM_MIDDLE:h=e-g;f=.5*(k-d);break;case LStageAlign.MIDDLE:h=.5*(e-g),f=.5*(k-d)}}a.canvasObj.style.marginTop=h+"px";a.canvasObj.style.marginLeft=f+"px";a.isOldFirefox&&
(a.left=parseInt(a.canvasObj.style.marginLeft),a.top=parseInt(a.canvasObj.style.marginTop));a.ll_setStageSize(d,g)},a.sleep=function(a){for(var b=new Date;(new Date).getTime()-b.getTime()<a;);},a.screen=function(c){a.displayState=c;a.stage&&("number"==typeof a.displayState?a.resize(a.width*a.displayState,a.height*a.displayState):a.resize())},a}();
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,c){var b=this.length>>>0,d=Number(c)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=b);b>d;d++)if(d in this&&this[d]===a)return d;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"==Object.prototype.toString.apply(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind-what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,1),b=this,d=function(){},g=function(){return b.apply(this instanceof d&&a?this:a,c.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,g.prototype=new d,g});
Array.prototype.find||(Array.prototype.find=function(a,c){var b,d,g,h;if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");b=Object(this);d=b.length>>>0;for(h=0;d>h;h++)if(g=b[h],a.call(c,g,h,b))return g});
Array.prototype.findIndex||(Array.prototype.findIndex=function(a,c){var b,d,g,h;if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");b=Object(this);d=b.length>>>0;for(h=0;d>h;h++)if(g=b[h],a.call(c,g,h,b))return h;return-1});
Array.prototype.forEach||(Array.prototype.forEach=function(a,c){var b,d,g,h,f;if(null==this)throw new TypeError(" this is null or not defined");if(g=Object(this),h=g.length>>>0,"function"!=typeof a)throw new TypeError(a+" is not a function");1<arguments.length&&(b=c);for(d=0;h>d;)d in g&&(f=g[d],a.call(b,f,d,g)),d++});
Array.prototype.every||(Array.prototype.every=function(a,c){var b,d,g,h,f,k;if(null==this)throw new TypeError("this is null or not defined");if(g=Object(this),h=g.length>>>0,"function"!=typeof a)throw new TypeError;1<arguments.length&&(b=c);for(d=0;h>d;){if(d in g&&(f=g[d],k=a.call(b,f,d,g),!k))return!1;d++}return!0});
Array.prototype.some||(Array.prototype.some=function(a){var c,b,d,g;if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof a)throw new TypeError;c=Object(this);b=c.length>>>0;d=2<=arguments.length?arguments[1]:void 0;for(g=0;b>g;g++)if(g in c&&a.call(d,c[g],g,c))return!0;return!1});
String.format||(String.format=function(a){var c=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,d){return"undefined"!=typeof c[d]?c[d]:a})});void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var a=/function\s([^(]{1,})\(/.exec(this.toString());return a&&1<a.length?a[1].trim():""},set:function(){}});window.console||(window.console={log:trace,warn:trace});LInit=init;LExtends=base;
LObject=function(){function a(){this.type="LObject";this.objectindex=this.objectIndex=++LGlobal.objectIndex}return a.prototype={callParent:function(a,b){if(a&&b){var d,g=!1,h="__ll__parent_call"+a;return"undefined"==typeof this[h]?(g=!0,this[h]=0):this[h]++,this[h]>=this.__ll__parent__.length?!1:(d=this.__ll__parent__[this[h]][a]?this.__ll__parent__[this[h]][a].apply(this,b):this.callParent(a,b),g&&delete this[h],d)}},copyProperty:function(a){for(var b in a)"number"==typeof a[b]||"string"==typeof a[b]||
"boolean"==typeof a[b]?"objectindex"!=b&&"objectIndex"!=b&&(this[b]=a[b]):Array.isArray(a[b])&&(this[b]=a[b].slice());a.mask&&(this.mask=a.mask.clone())},toString:function(){return"[object "+this.constructor.name+"]"}},a}();LColorTransform=function(){return function(a,c,b,d,g,h,f,k){LExtends(this,LObject,[]);this.redMultiplier=a;this.greenMultiplier=c;this.blueMultiplier=b;this.alphaMultiplier=d;this.redOffset=g;this.greenOffset=h;this.blueOffset=f;this.alphaOffset=k}}();
LTransform=function(){return function(){LExtends(this,LObject,[]);this.matrix=null}}();
LMatrix=function(){function a(d,a,h,c,b,e,m,n,q){LExtends(this,LObject,[]);this.a=1;this.c=this.u=this.b=0;this.d=1;this.ty=this.tx=this.v=0;this.w=1;typeof d!=UNDEFINED&&(this.a=d);typeof a!=UNDEFINED&&(this.b=a);typeof h!=UNDEFINED&&(this.c=h);typeof c!=UNDEFINED&&(this.d=c);typeof b!=UNDEFINED&&(this.tx=b);typeof e!=UNDEFINED&&(this.ty=e);typeof m!=UNDEFINED&&(this.u=m);typeof n!=UNDEFINED&&(this.v=n);typeof q!=UNDEFINED&&(this.w=q)}var c,b={setTo:function(d,a,h,c,b,e,m,n,q){return typeof d!=UNDEFINED&&
(this.a=d),typeof a!=UNDEFINED&&(this.b=a),typeof h!=UNDEFINED&&(this.c=h),typeof c!=UNDEFINED&&(this.d=c),typeof b!=UNDEFINED&&(this.tx=b),typeof e!=UNDEFINED&&(this.ty=e),typeof m!=UNDEFINED&&(this.u=m),typeof n!=UNDEFINED&&(this.v=n),typeof q!=UNDEFINED&&(this.w=q),this},isIdentity:function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d&&0==this.tx&&0==this.ty&&0==u&&0==v&&1==w},transform:function(d){return d.transform(this.a,this.b,this.c,this.d,this.tx,this.ty),this},identity:function(){this.setTo(1,
0,0,1,0,0,0,0,1)},rotate:function(d){var g=d*Math.PI/180;d=Math.cos(g);g=Math.sin(g);d=new a(d,g,-g,d,0,0,0,0,1);return this.add(d),this},scale:function(d,g){var h=new a(d,0,0,g,0,0,0,0,1);return this.add(h),this},translate:function(d,g){var h=new a(1,0,0,1,d,g,0,0,1);return this.add(h),this},skew:function(d,g){var h=new a(1,g,d,1,0,0,0,0,1);return this.add(h),this},add:function(d){this.setTo(this.a*d.a+this.b*d.c+this.u*d.tx,this.a*d.b+this.b*d.d+this.u*d.ty,this.c*d.a+this.d*d.c+this.v*d.tx,this.c*
d.b+this.d*d.d+this.v*d.ty,this.tx*d.a+this.ty*d.c+this.w*d.tx,this.tx*d.b+this.ty*d.d+this.w*d.ty,this.a*d.u+this.b*d.v+this.u*d.w,this.c*d.u+this.d*d.v+this.v*d.w,this.tx*d.u+this.ty*d.v+this.w*d.w)},toArray:function(d){var a,h,c,b,e,m,n,q,p,t,r,x;return Array.isArray(d)&&3==d.length?(a=d[0]*this.a+d[1]*this.c+d[2]*this.tx,h=d[0]*this.b+d[1]*this.d+d[2]*this.ty,c=d[0]*this.u+d[1]*this.v+d[2]*this.w,[a,h,c]):(b=this.a*d.a+this.b*d.c+this.u*d.tx,e=this.a*d.b+this.b*d.d+this.u*d.ty,m=this.a*d.u+this.b*
d.v+this.u*d.w,n=this.c*d.a+this.d*d.c+this.v*d.tx,q=this.c*d.b+this.d*d.d+this.v*d.ty,p=this.c*d.u+this.d*d.v+this.v*d.w,t=this.tx*d.a+this.ty*d.c+this.w*d.tx,r=this.tx*d.b+this.ty*d.d+this.w*d.ty,x=this.tx*d.u+this.ty*d.v+this.w*d.w,[b,e,n,q,t,r,m,p,x])},clone:function(){return new a(this.a,this.b,this.c,this.d,this.tx,this.ty,this.u,this.v,this.w)}};for(c in b)a.prototype[c]=b[c];return a}();
LVec2=function(){function a(a,b){this.x=a||0;this.y=b||0}return a.dot=function(a,b){return a.x*b.x+a.y*b.y},a.cross=function(a,b){return a.x*b.y-a.y*b.x},a.distance=function(a,b){var d=a.x-b.x,g=a.y-b.y;return Math.sqrt(d*d+g*g)},a.getMinMax=function(c,b){var d,g,h=a.dot(c[0],b),f=a.dot(c[0],b),k=0,e=0;for(d=1;d<c.length;d++)g=a.dot(c[d],b),h>g&&(h=g,k=d),g>f&&(f=g,e=d);return{min_o:h,min_i:k,max_o:f,max_i:e}},a.prototype={length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){var c=
this.length();return new a(this.x/c,this.y/c)},normR:function(){return new a(-this.y,this.x)},normL:function(){return new a(this.y,-this.x)}},a}();
LEventDispatcher=function(){function a(){LExtends(this,LObject,[]);this._eventList=[]}var c,b={addEventListener:function(d,a){this._eventList.push({listener:a,type:d})},removeEventListener:function(d,a){var h,c;c=this._eventList.length;for(h=0;c>h;h++)if(this._eventList[h]&&d==this._eventList[h].type&&(!a||this._eventList[h].listener==a))return this._eventList.splice(h,1),void 0},removeAllEventListener:function(){this._eventList=[]},dispatchEvent:function(d){var a,h=this._eventList.length,c="string"==
typeof d?d:d.eventType;for(a=0;h>a;a++)if(this._eventList[a]&&c==this._eventList[a].type){if("string"==typeof d)this.currentTarget=this.target=this,this.eventType=this.event_type=c,this._eventList[a].listener(this),delete this.currentTarget,delete this.target,delete this.eventType;else if(d.target||(d.target=this),d.currentTarget||(d.currentTarget=d.target),d._ll_preventDefault=!1,this._eventList[a].listener(d),d._ll_preventDefault)break;return!0}return!1},hasEventListener:function(d,a){var h,c=this._eventList.length;
for(h=0;c>h;h++)if(this._eventList[h]&&d==this._eventList[h].type&&(typeof a==UNDEFINED||a==this._eventList[h].listener))return!0;return!1}};for(c in b)a.prototype[c]=b[c];return a}();
LDisplayObject=function(){function a(){LExtends(this,LEventDispatcher,[]);this.name="instance"+this.objectIndex;this.height=this.width=this.y=this.x=0;this.alpha=this.scaleY=this.scaleX=1;this.visible=!0;this.rotate=0;this.filters=this.blendMode=this.mask=null;this.transform=new LTransform;this.parent=null}var c,b={_createCanvas:function(){this._canvas||(this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"))},ll_show:function(){var d=LGlobal.canvas;this._canShow()&&
(this._ll_trans=!1,LGlobal.box2d||"function"!=typeof this._ll_loopframe||this._ll_loopframe(),d.save(),this._showReady(d),this.blendMode&&(d.globalCompositeOperation=this.blendMode),this.filters&&this._ll_setShadow(),this._rotateReady(),null!=this.mask&&this.mask.ll_show&&(this.mask.ll_show(),d.clip()),this._transformRotate(),this._transformScale(),this._coordinate(d),this.transform.matrix&&this.transform.matrix.transform(d),1>this.alpha&&(this._ll_trans=!0,d.globalAlpha=this.alpha),LGlobal.fpsStatus&&
(LGlobal.fpsStatus.display++,this._ll_trans&&LGlobal.fpsStatus.transform++),this._ll_show(d),d.restore(),null!=LGlobal.box2d&&"function"==typeof this._ll_loopframe&&this._ll_loopframe())},_canShow:function(){return this.visible},_coordinate:function(d){0==this.x&&0==this.y||(this._ll_trans=!0,d.transform(1,0,0,1,this.x,this.y))},_rotateReady:function(){},_showReady:function(){},_ll_show:function(){},_ll_setShadow:function(){var d,a,h=this.filters;if(h)for(d=0,a=h.length;a>d;d++)h[d].ll_show()},_transformRotate:function(){var d;
0!=this.rotate&&(this._ll_trans=!0,d=LGlobal.canvas,rotateFlag=Math.PI/180,rotateObj=new LMatrix,typeof this.rotatex==UNDEFINED&&(this.rotatex=0,this.rotatey=0),this.box2dBody&&(rotateFlag=1),rotateObj.a=Math.cos(this.rotate*rotateFlag),rotateObj.b=Math.sin(this.rotate*rotateFlag),rotateObj.c=-rotateObj.b,rotateObj.d=rotateObj.a,rotateObj.tx=this.x+this.rotatex,rotateObj.ty=this.y+this.rotatey,rotateObj.transform(d).setTo(1,0,0,1,-rotateObj.tx,-rotateObj.ty).transform(d))},_transformScale:function(){var d,
a=LGlobal.canvas;1==this.scaleX&&1==this.scaleY||(this._ll_trans=!0,d=new LMatrix,1!=this.scaleX&&(d.tx=this.x),1!=this.scaleY&&(d.ty=this.y),d.a=this.scaleX,d.d=this.scaleY,d.transform(a).setTo(1,0,0,1,-d.tx,-d.ty).transform(a))},getAbsoluteScale:function(){var d,a,h;d=this.scaleX;a=this.scaleY;for(h=this.parent;h&&"root"!=h;)d*=h.scaleX,a*=h.scaleY,h=h.parent;return{scaleX:d,scaleY:a}},getRootCoordinate:function(){var d,a,h;d=this.x;a=this.y;for(h=this.parent;h&&"root"!=h;)d*=h.scaleX,a*=h.scaleY,
d+=h.x,a+=h.y,h=h.parent;return new LPoint(d,a)},getBounds:function(d){if(typeof d==UNDEFINED)return new LRectangle(0,0,0,0);var a,h,c=0,b=0,e=0,m=0;return this.objectIndex!=d.objectIndex&&(a=this.getRootCoordinate(),h=d.getRootCoordinate(),c=a.x-h.x,b=a.y-h.y),d.getWidth&&(e=d.getWidth()),d.getHeight&&(m=d.getHeight()),new LRectangle(c,b,e,m)},getDataCanvas:function(){var d,a,h,c,b,e;return this._createCanvas(),a=LGlobal.canvasObj,c=LGlobal.canvas,d=this._canvas,h=this._context,this.width=this.getWidth(),
this.height=this.getHeight(),d.width=this.width,d.height=this.height,h.clearRect(0,0,this.width,this.height),LGlobal.canvasObj=this._canvas,LGlobal.canvas=this._context,b=this.x,e=this.y,this.x=this.y=0,this.ll_show(),this.x=b,this.y=e,this._canvas=d,this._context=h,LGlobal.canvasObj=a,LGlobal.canvas=c,this._canvas},getDataURL:function(){var d=this.getDataCanvas();return d.toDataURL.apply(d,arguments)},ismouseonShapes:function(d,a,h){var c,b,e,m,n;typeof d==UNDEFINED&&(d=this.shapes);c=this.getRootMatrix();
for(e=d.length-1;0<=e;e--)if(b=d[e],n=b.arg,m=this._changeShape(b.type,n,c),b.type==LShape.VERTICES){if(LGlobal.hitPolygon(m,a,h))return!0}else if(b.type==LShape.RECT){if(LGlobal.hitPolygon(m,a,h))return!0}else if(b.type==LShape.ARC&&(m[0]-a)*(m[0]-a)+(m[1]-h)*(m[1]-h)<m[3])return!0;return!1},_changeShape:function(d,a,h){var c,b,e,m;if(d==LShape.VERTICES)for(c=[],d=0,b=a.length;b>d;d++)c[d]=h.toArray([a[d][0],a[d][1],1]);else if(d==LShape.RECT)for(c=[[a[0],a[1]],[a[0]+a[2],a[1]],[a[0]+a[2],a[1]+a[3]],
[a[0],a[1]+a[3]]],d=0,b=c.length;b>d;d++)c[d]=h.toArray([c[d][0],c[d][1],1]);else d==LShape.ARC&&(e=h.toArray([a[0],a[1],1]),m=h.toArray([a[0]+a[2],a[1],1]),b=(e[0]-m[0])*(e[0]-m[0])+(e[1]-m[1])*(e[1]-m[1]),c=[e[0],e[1],Math.sqrt(b),b]);return c},getRootMatrix:function(){for(var d=this,a=new LMatrix;d&&"root"!=d;)1==d.scaleX&&1==d.scaleY||a.scale(d.scaleX,d.scaleY),0!=d.rotate&&a.rotate(d.rotate),0==d.x&&0==d.y||a.translate(d.x,d.y),d=d.parent;return a},remove:function(){var d=this.parent;d&&"root"!=
d&&(d.removeChild(this),this._ll_removeFromSelf=!0)}};for(c in b)a.prototype[c]=b[c];return a}();
LInteractiveObject=function(){function a(){LExtends(this,LDisplayObject,[]);this.type="LInteractiveObject";this.mouseEnabled=!0;this.mouseList=[]}var c,b={addEventListener:function(d,a){if(0<=d.indexOf("mouse")||0<=d.indexOf("touch")||d==LMouseEvent.DOUBLE_CLICK){if(LMouseEventContainer.container[d]||(d==LMouseEvent.MOUSE_OVER||d==LMouseEvent.MOUSE_OUT)&&LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE])return LMouseEventContainer.addMouseEvent(this,d,a),void 0;this.mouseList.push({listener:a,
type:d})}else this._eventList.push({listener:a,type:d})},removeEventListener:function(d,a){var h,c;if(!(0<=d.indexOf("mouse")||0<=d.indexOf("touch")||d==LMouseEvent.DOUBLE_CLICK))return this.callParent("removeEventListener",arguments);if(LMouseEventContainer.container[d]||(d==LMouseEvent.MOUSE_OVER||d==LMouseEvent.MOUSE_OUT)&&LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE])return LMouseEventContainer.removeMouseEvent(this,d,a),void 0;c=this.mouseList.length;for(h=0;c>h;h++)if(this.mouseList[h]&&
d==this.mouseList[h].type&&this.mouseList[h].listener==a)return this.mouseList.splice(h,1),void 0},removeAllEventListener:function(){this.mouseList.length=0;this._eventList.length=0;LMouseEventContainer.container[LMouseEvent.MOUSE_DOWN]&&LMouseEventContainer.removeMouseEvent(this,LMouseEvent.MOUSE_DOWN);LMouseEventContainer.container[LMouseEvent.MOUSE_UP]&&LMouseEventContainer.removeMouseEvent(this,LMouseEvent.MOUSE_UP);LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&(LMouseEventContainer.removeMouseEvent(this,
LMouseEvent.MOUSE_MOVE),LMouseEventContainer.removeMouseEvent(this,LMouseEvent.MOUSE_OVER),LMouseEventContainer.removeMouseEvent(this,LMouseEvent.MOUSE_OUT))},hasEventListener:function(d,a){var h,c;if(LMouseEventContainer.container[d])return LMouseEventContainer.hasEventListener(this,d,a);if(!(0<=d.indexOf("mouse")||0<=d.indexOf("touch")||d==LMouseEvent.DOUBLE_CLICK))return this.callParent("hasEventListener",arguments);c=this.mouseList.length;for(h=0;c>h;h++)if(this.mouseList[h]&&d==this.mouseList[h].type&&
(!a||this.mouseList[h].listener==a))return!0;return!1}};for(c in b)a.prototype[c]=b[c];return a}();
LDisplayObjectContainer=function(){function a(){LExtends(this,LInteractiveObject,[]);this.childList=[];this.numChildren=0;this.mouseChildren=!0}var c,b={addChild:function(d){var a;return d.parent&&(a=LGlobal.destroy,LGlobal.destroy=!1,d.parent.removeChild(d),LGlobal.destroy=a),d.parent=this,this.childList.push(d),this.numChildren=this.childList.length,this._ll_removeFromSelf=!1,d},addChildAt:function(d,a){var h;if(!(0>a||a>this.childList.length))return"function"==typeof d.remove&&(h=LGlobal.destroy,
LGlobal.destroy=!1,d.remove(),LGlobal.destroy=h),d.parent=this,this.childList.splice(a,0,d),this.numChildren=this.childList.length,this._ll_removeFromSelf=!1,d},removeChild:function(d){var a,h,c=this.childList;a=0;for(h=c.length;h>a;a++)if(d.objectIndex==c[a].objectIndex){LGlobal.destroy&&d.die&&d.die();this.childList.splice(a,1);break}this.numChildren=this.childList.length;delete d.parent},getChildAt:function(d){var a=this.childList;return 0==a.length||a.length<=d?null:a[d]},getChildByName:function(d){var a,
h,c=this.childList;a=0;for(h=c.length;h>a;a++)if(c[a]&&c[a].name==d)return c[a];return null},removeChildAt:function(d){var a,h=this.childList;if(!(h.length<=d))return LGlobal.destroy&&h[d].die&&h[d].die(),a=this.childList.splice(d,1),this.numChildren=this.childList.length,a},getChildIndex:function(a){if(!a)return-1;var g,h=this.childList,c=h.length;for(g=0;c>g;g++)if(h[g].objectIndex==a.objectIndex)return g;return-1},setChildIndex:function(a,g){var h,c=this.childList,b=c.length;if("root"==a.parent||
a.parent.objectIndex!=this.objectIndex||0>g||g>=b)return-1;for(h=0;b>h&&c[h].objectIndex!=a.objectIndex;h++);return this.childList.splice(h,1),this.childList.splice(g,0,a),g},resize:function(){this.width=this.getWidth();this.height=this.getHeight()},removeAllChild:function(){var a,g,h=this.childList;a=0;for(g=h.length;g>a;a++)LGlobal.destroy&&h[a].die&&h[a].die();this.numChildren=this.height=this.width=this.childList.length=0}};for(c in b)a.prototype[c]=b[c];return a}();
LLoader=function(){function a(){LExtends(this,LEventDispatcher,[]);this.type="LLoader"}return a.TYPE_BITMAPDATE="bitmapData",a.prototype.load=function(c,b){var d=this;b||(b=a.TYPE_BITMAPDATE);d.loadtype=b;b==a.TYPE_BITMAPDATE&&(d.content=new Image,d.content.onload=function(){d.content.onload=null;var a=new LEvent(LEvent.COMPLETE);a.currentTarget=d;a.target=d.content;d.dispatchEvent(a);delete d.content},d.content.src=c)},a}();
LURLLoader=function(){function a(){LExtends(this,LEventDispatcher,[]);this.type="LURLLoader";this.loadtype="";this.content=null;this.event={}}return a.TYPE_TEXT="text",a.TYPE_JS="js",a.prototype.load=function(c,b){var d,g,h,f=this;b||(g=getExtension(c),"txt"==g?b=a.TYPE_TEXT:"js"==g&&(b=a.TYPE_JS));f.loadtype=b;b==a.TYPE_TEXT?LAjax.get(c,{},function(a){d=new LEvent(LEvent.COMPLETE);f.data=a;d.currentTarget=f;d.target=a;f.dispatchEvent(d);delete f.content;delete f.data}):b==a.TYPE_JS&&(h=document.createElement("script"),
h.onload=function(){d=new LEvent(LEvent.COMPLETE);d.currentTarget=f;d.target=f;f.dispatchEvent(d);delete f.content},h.src=c,h.type="text/javascript",document.querySelector("head").appendChild(h))},a}();
LWebAudio=function(){function a(){LExtends(this,LEventDispatcher,[]);this.loopIndex=this.loopEnd=this.loopStart=this.length=this.currentSave=this.currentStart=this.currentTime=0;this.loopLength=1;this.playing=!1;this.volume=1;LSound.Container.add(this)}var c,b;a.container=[];a.containerCount=0;try{a.audioTag=new Audio}catch(d){console.warn("ReferenceError:Can't find variable:Audio"),a.audioTag={canPlayType:function(){return!1}}}a._context=null;c={getWebAudio:function(){var d;if(0<a.containerCount)d=
a.container.shift();else if(typeof AudioContext!==UNDEFINED)try{d=new AudioContext}catch(h){a.containerCount=a.container.length,d=a.container.shift()}else{if(typeof webkitAudioContext===UNDEFINED)throw"AudioContext not supported.:(";try{d=new webkitAudioContext}catch(c){a.containerCount=a.container.length,d=a.container.shift()}}return d.createGainNode||(d.createGainNode=d.createGain),a.container.push(d),d},onload:function(a){var d;return"[object AudioBuffer]"!==Object.prototype.toString.apply(a)?
(this.load(a),void 0):(this.data||(this.data=this.getWebAudio()),this.buffer=a,this.length=this.buffer.duration,d=new LEvent(LEvent.COMPLETE),d.currentTarget=this,d.target=this.buffer,this.dispatchEvent(d),void 0)},_onended:function(){this.dispatchEvent(LEvent.SOUND_COMPLETE);this.close();++this.loopIndex<this.loopLength&&this.play(this.currentStart,void 0,this.currentTimeTo)},load:function(d){var c,b,k,e,m,n=this;if("string"!=typeof d)return"[object AudioBuffer]"==Object.prototype.toString.apply(d)?
n.onload(d):"[object ArrayBuffer]"==Object.prototype.toString.apply(d)&&(n.data||(n.data=n.getWebAudio()),n.data.decodeAudioData(d,n.onload.bind(n),function(a){throw"AudioContext decodeAudioData error:"+a.toString();})),void 0;e={mov:["quicktime"],"3gp":["3gpp"],midi:["midi"],mid:["midi"],ogv:["ogg"],m4a:["acc"],mp3:["mpeg"],wav:["wav","x-wav","wave"],wave:["wav","x-wav","wave"],aac:["mp4","aac"]};d=d.split(",");for(b=0;b<d.length;b++){if(c=d[b].split("."),k=c[c.length-1],k=e[k]?e[k]:[k],k.some(function(d){return a.audioTag.canPlayType(n._type+
"/"+d)}))return LAjax.responseType=LAjax.ARRAY_BUFFER,LAjax.get(d[b],{},n.onload.bind(n)),void 0;console.warn("Not support "+c[c.length-1]+":"+d[b]);m=new LEvent(LEvent.COMPLETE);m.currentTarget=m.target=n;n.dispatchEvent(m)}},getCurrentTime:function(){return this.playing?this.data.currentTime-this.currentSave+this.currentTime:this.currentSave},setVolume:function(a){this.volume=a;this.playing&&(this.volumeNode.gain.value=a)},getVolume:function(){return this.volume},play:function(a,d,c){0!=this.length&&
(typeof d!==UNDEFINED&&(this.loopIndex=0,this.loopLength=d),typeof a!==UNDEFINED&&(this.currentTime=a,this.currentStart=a),this.currentTimeTo=typeof c!==UNDEFINED?c>this.length?this.length:c:this.length,this.data.loop=!1,this.playing=!0,this.timeout&&(clearTimeout(this.timeout),delete this.timeout),this.timeout=setTimeout(this._onended.bind(this),1E3*(this.currentTimeTo-this.currentTime)),this.bufferSource=this.data.createBufferSource(),this.bufferSource.buffer=this.buffer,this.volumeNode=this.data.createGainNode(),
this.volumeNode.gain.value=this.volume,this.volumeNode.connect(this.data.destination),this.bufferSource.connect(this.volumeNode),this.currentSave=this.data.currentTime,this.bufferSource.start?this.bufferSource.start(0,this.currentTime,this.length-this.currentTime):this.bufferSource.noteGrainOn(0,this.currentTime,this.length-this.currentTime))},playSegment:function(a,d,c){this.playTo(a,a+d,c)},playTo:function(a,d,c){this.play(a,c,d)},stop:function(){this.playing&&(this.timeout&&(clearTimeout(this.timeout),
delete this.timeout),this.bufferSource.stop?this.bufferSource.stop(0):this.bufferSource.noteOff(0),this.currentSave=this.getCurrentTime(),this.currentTime=this.currentSave,this.playing=!1)},close:function(){this.playing&&(this.timeout&&(clearTimeout(this.timeout),delete this.timeout),this.bufferSource.stop?this.bufferSource.stop(0):this.bufferSource.noteOff(0),this.playing=!1,this.currentTime=0,this.currentSave=0)},ll_check:function(){this.playing&&this.currentTimeTo<this.data.currentTime-this.currentSave+
.001*LSound.Container.time&&this._onended()},die:function(){LSound.Container.remove(this)}};for(b in c)a.prototype[b]=c[b];return a}();
LMedia=function(){function a(){LExtends(this,LDisplayObject,[]);this.loopIndex=this.length=0;this.loopLength=1;this.playing=!1;this.onsoundcomplete=this.oncomplete=null;this.currentStart=0;LSound.Container.add(this)}var c,b={onload:function(){var a,c=this;return c.data.readyState?(c.length=c.data.duration-(LGlobal.android?.1:0),a=new LEvent(LEvent.COMPLETE),a.currentTarget=c,a.target=c.data,c.dispatchEvent(a),void 0):(c.data.addEventListener("canplaythrough",function(){c.onload()},!1),void 0)},_onended:function(){var a;
this.dispatchEvent(LEvent.SOUND_COMPLETE);++this.loopIndex<this.loopLength?(a=this.loopIndex,this.close(),this.play(this.currentStart,this.loopLength,this.currentTimeTo),this.loopIndex=a):this.close()},load:function(a){var c,h,b,k,e,m=this;if("[object HTMLAudioElement]"==Object.prototype.toString.apply(a))return m.data=a,m.onload(),void 0;k={mov:["quicktime"],"3gp":["3gpp"],midi:["midi"],mid:["midi"],ogv:["ogg"],m4a:["acc"],mp3:["mpeg"],wav:["wav","x-wav","wave"],wave:["wav","x-wav","wave"],aac:["mp4",
"aac"]};a=a.split(",");for(h=0;h<a.length;h++){if(c=a[h].split("."),b=c[c.length-1],b=k[b]?k[b]:[b],b.some(function(a){return m.data.canPlayType(m._type+"/"+a)}))return m.data.src=a[h],m.onload(),m.data.load(),void 0;console.warn("Not support "+c[c.length-1]+":"+a[h]);e=new LEvent(LEvent.COMPLETE);e.currentTarget=e.target=m;m.dispatchEvent(e)}m.oncomplete&&m.oncomplete({})},getCurrentTime:function(){return this.data.currentTime},setVolume:function(a){this.data.volume=a},getVolume:function(){return this.data.volume},
play:function(a,c,h){var b=this;0!=b.length&&(LGlobal.android&&LSound.Container.stopOther(this),typeof a!=UNDEFINED&&(b.data.currentTime=a,b.currentStart=a),typeof c!=UNDEFINED&&(b.loopLength=c),b.currentTimeTo=typeof h!==UNDEFINED?h>b.length?b.length:h:b.length,b.timeout&&(clearTimeout(b.timeout),delete b.timeout),b.timeout=setTimeout(function(){b._onended()},1E3*(b.currentTimeTo-b.data.currentTime)),b.data.loop=!1,b.loopIndex=0,b.playing=!0,b.data.play())},playSegment:function(a,c,b){this.playTo(a,
a+c,b)},playTo:function(a,c,b){this.play(a,b,c)},stop:function(){this.playing&&(this.timeout&&(clearTimeout(this.timeout),delete this.timeout),this.playing=!1,this.data.pause())},close:function(){this.playing&&(this.timeout&&(clearTimeout(this.timeout),delete this.timeout),this.playing=!1,this.data.pause(),this.data.currentTime=0,this.currentSave=0)},ll_check:function(){this.playing&&(this.data.duration!=this._ll_duration&&(this._ll_duration=this.data.duration,this.length=this.data.duration-(LGlobal.android?
.1:0)),this.currentTimeTo<this.data.currentTime+.005*LSound.Container.time&&this._onended())},die:function(){LSound.Container.remove(this)}};for(c in b)a.prototype[c]=b[c];return a}();
LSound=function(){function a(d){if(this.type="LSound",this._type="audio",a.webAudioEnabled&&LGlobal.webAudio)LExtends(this,LWebAudio,[]);else{LExtends(this,LMedia,[]);try{this.data=new Audio}catch(c){console.warn("ReferenceError:Can't find variable:Audio"),this.data={}}this.data.loop=!1;this.data.autoplay=!1}d&&this.load(d)}a.TYPE_SOUND="sound";a.webAudioEnabled=!1;var c=location.protocol;if("http:"==c||"https:"==c){if(typeof AudioContext!==UNDEFINED)try{LWebAudio._context=new AudioContext}catch(b){}else if(typeof webkitAudioContext!==
UNDEFINED)try{LWebAudio._context=new webkitAudioContext}catch(d){}LWebAudio._context&&(LWebAudio.container.push(LWebAudio._context),a.webAudioEnabled=!0)}return a.Container={ll_save:0,time:0,list:[],ll_show:function(){var d,c;d=a.Container;c=(new Date).getTime();d.time=c-(d.ll_save?d.ll_save:c);d.ll_save=c;d=d.list;for(c=d.length-1;0<=c;c--)d[c]&&d[c].ll_check()},add:function(d){0<=a.Container.list.indexOf(d)||a.Container.list.push(d)},remove:function(d){var c,b=a.Container.list;for(c=b.length-1;0<=
c;c--)if(b[c].objectIndex==d.objectIndex){b.splice(c,1);break}},stopOther:function(d){var c,b=a.Container.list;for(c=b.length-1;0<=c;c--)b[c].objectIndex!=d.objectIndex&&b[c].stop()}},LGlobal.childList.push(a.Container),a}();
LVideo=function(){function a(a){LExtends(this,LMedia,[]);this.type="LVideo";this._type="video";this.rotatey=this.rotatex=0;this.data=document.createElement("video");this.data.style.display="none";document.body.appendChild(this.data);this.data.id="video_"+this.objectIndex;this.data.loop=!1;this.data.autoplay=!1;a&&this.load(a)}var c,b={_ll_show:function(a){a.drawImage(this.data,this.x,this.y)},die:function(){document.body.removeChild(this.data);delete this.data},getWidth:function(){return this.data.width},
getHeight:function(){return this.data.height}};for(c in b)a.prototype[c]=b[c];return a}();
LPoint=function(){function a(a,b){this.x=a;this.y=b}return a.distance=function(c,b){return a.distance2(c.x,c.y,b.x,b.y)},a.distance2=function(a,b,d,g){a-=d;b-=g;return Math.sqrt(a*a+b*b)},a.interpolate=function(c,b,d){return new a(c.x+(b.x-c.x)*(1-d),c.y+(b.y-c.y)*(1-d))},a.polar=function(c,b){return new a(c*Math.cos(b),c*Math.sin(b))},a.prototype={toString:function(){return"[object LPoint("+this.x+","+this.y+")]"},length:function(){return a.distance2(this.x,this.y,0,0)},add:function(c){return new a(this.x+
c.x,this.y+c.y)},clone:function(){return new a(this.x,this.y)},setTo:function(a,b){this.x=a;this.y=b},copyFrom:function(a){this.setTo(a.x,a.y)},equals:function(a){return this.x==a.x&&this.y==a.y},normalize:function(a){a/=this.length();this.x*=a;this.y*=a},offset:function(a,b){this.x+=a;this.y+=b},subtract:function(c){return new a(this.x-c.x,this.y-c.y)}},a}();
LRectangle=function(){function a(a,b,d,g){this.x=a;this.y=b;this.width=d;this.height=g;this.setRectangle()}return a.prototype={setRectangle:function(){this.bottom=this.y+this.height;this.right=this.x+this.width;this.left=this.x;this.top=this.y},clone:function(){return new a(this.x,this.y,this.width,this.height)},contains:function(a,b){return a>=this.x&&a<=this.right&&b>=this.y&&b<=this.bottom},containsRect:function(a){return a.x>=this.x&&a.right<=this.right&&a.y>=this.y&&a.bottom<=this.bottom},equals:function(a){return a.x==
this.x&&a.width==this.width&&a.y==this.y&&a.height==this.height},inflate:function(a,b){this.width+=a;this.height+=b;this.setRectangle()},intersection:function(c){var b=this.x>c.x?this.x:c.x,d=this.y>c.y?this.y:c.y,g=this.right>c.right?c.right:this.right;c=this.bottom>c.bottom?c.bottom:this.bottom;return g>=b&&c>=d?new a(b,d,g,c):new a(0,0,0,0)},intersects:function(a){var b=this.y>a.y?this.y:a.y,d=this.bottom>a.bottom?a.bottom:this.bottom;return(this.right>a.right?a.right:this.right)>=(this.x>a.x?
this.x:a.x)&&d>=b},isEmpty:function(){return 0==this.x&&0==this.y&&0==this.width&&0==this.height},offset:function(a,b){this.x+=a;this.y+=b;this.setRectangle()},setEmpty:function(){this.height=this.width=this.y=this.x=0;this.setRectangle()},setTo:function(a,b,d,g){this.x=a;this.y=b;this.width=d;this.height=g;this.setRectangle()},toString:function(){return"[object LRectangle("+this.x+","+this.y+","+this.width+","+this.height+")]"},union:function(c){return new a(this.x>c.x?c.x:this.x,this.y>c.y?c.y:
this.y,this.right>c.right?this.right:c.right,this.bottom>c.bottom?this.bottom:c.bottom)}},a}();
LGraphics=function(){function a(){LExtends(this,LObject,[]);this.type="LGraphics";this.color="#000000";this.alpha=1;this.bitmap=null;this.setList=[];this.showList=[]}var c,b={ll_show:function(){var a,c=this.setList.length;if(0!=c)for(a=0;c>a;a++)this.setList[a](),LGlobal.fpsStatus&&LGlobal.fpsStatus.graphics++},clone:function(){var d,c,b,f=new a;f.color=this.color;f.alpha=this.alpha;f.bitmap=this.bitmap;d=0;for(c=this.setList.length;c>d;d++)b=this.setList[d],f.setList.push(b);d=0;for(c=this.showList.length;c>
d;d++)b=this.showList[d],f.showList.push(b);return f},lineCap:function(a){this.setList.push(function(){LGlobal.canvas.lineCap=a})},lineJoin:function(a){this.setList.push(function(){LGlobal.canvas.lineJoin=a})},lineWidth:function(a){this.setList.push(function(){LGlobal.canvas.lineWidth=a})},strokeStyle:function(a){this.setList.push(function(){LGlobal.canvas.strokeStyle=a})},stroke:function(){this.setList.push(function(){LGlobal.canvas.stroke()})},beginPath:function(){this.setList.push(function(){LGlobal.canvas.beginPath()})},
closePath:function(){this.setList.push(function(){LGlobal.canvas.closePath()})},moveTo:function(a,c){this.setList.push(function(){LGlobal.canvas.moveTo(a,c)});this.showList.push({type:LShape.POINT,arg:[a,c]})},lineTo:function(a,c){this.setList.push(function(){LGlobal.canvas.lineTo(a,c)});this.showList.push({type:LShape.POINT,arg:[a,c]})},rect:function(a,c,b,f){this.setList.push(function(){LGlobal.canvas.rect(a,c,b,f)});this.showList.push({type:LShape.RECT,arg:[a,c,b,f]})},fillStyle:function(a){this.setList.push(function(){LGlobal.canvas.fillStyle=
a})},fill:function(){this.setList.push(function(){LGlobal.canvas.fill()})},arc:function(a,c,b,f,k,e){this.setList.push(function(){LGlobal.canvas.arc(a,c,b,f,k,e)});this.showList.push({type:LShape.ARC,arg:f})},lineStyle:function(a,c){var b;null==c&&(c=this.color);this.color=c;this.setList.push(function(){b=LGlobal.canvas;b.lineWidth=a;b.strokeStyle=c})},clear:function(){this.bitmap=null;this.setList.length=0;this.showList.length=0},beginBitmapFill:function(a){var c=this;c.setList.push(function(){c.bitmap=
a})},drawEllipse:function(a,c,b,f,k){var e=this;e.setList.push(function(){var m,n,q,p,t,r,x,A,B,z,y;return m=LGlobal.canvas,m.beginPath(),n=b[0],q=b[1],p=b[2],t=b[3],r=p/2*.5522848,x=t/2*.5522848,A=n+p,B=q+t,z=n+p/2,y=q+t/2,m.moveTo(n,y),m.bezierCurveTo(n,y-x,z-r,q,z,q),m.bezierCurveTo(z+r,q,A,y-x,A,y),m.bezierCurveTo(A,y+x,z+r,B,z,B),m.bezierCurveTo(z-r,B,n,y+x,n,y),e.bitmap?(m.save(),m.clip(),m.drawImage(e.bitmap.image,e.bitmap.x,e.bitmap.y,e.bitmap.width,e.bitmap.height,0,0,e.bitmap.width,e.bitmap.height),
m.restore(),e.bitmap=null,void 0):(f&&(m.fillStyle=k,m.fill()),0<a&&(m.lineWidth=a,m.strokeStyle=c,m.stroke()),void 0)});e.showList.push({type:LShape.RECT,arg:b})},drawArc:function(a,c,b,f,k){var e=this;e.setList.push(function(){var m=LGlobal.canvas;return m.beginPath(),6<b.length&&b[6]&&m.moveTo(b[0],b[1]),m.arc(b[0],b[1],b[2],b[3],b[4],b[5]),6<b.length&&b[6]&&m.lineTo(b[0],b[1]),e.bitmap?(m.save(),m.clip(),m.drawImage(e.bitmap.image,e.bitmap.x,e.bitmap.y,e.bitmap.width,e.bitmap.height,0,0,e.bitmap.width,
e.bitmap.height),m.restore(),e.bitmap=null,void 0):(f&&(m.fillStyle=k,m.fill()),0<a&&(m.lineWidth=a,m.strokeStyle=c,m.stroke()),void 0)});e.showList.push({type:LShape.ARC,arg:b})},drawRect:function(a,c,b,f,k){var e=this;e.setList.push(function(){var m=LGlobal.canvas;return m.beginPath(),m.rect(b[0],b[1],b[2],b[3]),m.closePath(),e.bitmap?(m.save(),m.clip(),m.drawImage(e.bitmap.image,e.bitmap.x,e.bitmap.y,e.bitmap.width,e.bitmap.height,0,0,e.bitmap.width,e.bitmap.height),m.restore(),e.bitmap=null,void 0):
(f&&(m.fillStyle=k,m.fill()),0<a&&(m.lineWidth=a,m.strokeStyle=c,m.stroke()),void 0)});e.showList.push({type:LShape.RECT,arg:b})},drawRoundRect:function(a,c,b,f,k){var e=this;e.setList.push(function(){var m=LGlobal.canvas;return m.beginPath(),m.moveTo(b[0]+b[4],b[1]),m.lineTo(b[0]+b[2]-b[4],b[1]),m.arcTo(b[0]+b[2],b[1],b[0]+b[2],b[1]+b[4],b[4]),m.lineTo(b[0]+b[2],b[1]+b[3]-b[4]),m.arcTo(b[0]+b[2],b[1]+b[3],b[0]+b[2]-b[4],b[1]+b[3],b[4]),m.lineTo(b[0]+b[4],b[1]+b[3]),m.arcTo(b[0],b[1]+b[3],b[0],b[1]+
b[3]-b[4],b[4]),m.lineTo(b[0],b[1]+b[4]),m.arcTo(b[0],b[1],b[0]+b[4],b[1],b[4]),m.closePath(),e.bitmap?(m.save(),m.clip(),m.drawImage(e.bitmap.image,0,0,e.bitmap.width,e.bitmap.height,0,0,e.bitmap.width,e.bitmap.height),m.restore(),e.bitmap=null,void 0):(f&&(m.fillStyle=k,m.fill()),0<a&&(m.lineWidth=a,m.strokeStyle=c,m.stroke()),void 0)});e.showList.push({type:LShape.RECT,arg:b})},drawVertices:function(a,b,c,f,k){var e=this;3>c.length||(e.setList.push(function(){var m,n,q,p=LGlobal.canvas;p.beginPath();
p.moveTo(c[0][0],c[0][1]);q=c.length;for(m=1;q>m;m++)n=c[m],p.lineTo(n[0],n[1]);return p.lineTo(c[0][0],c[0][1]),p.closePath(),e.bitmap?(p.save(),p.clip(),p.drawImage(e.bitmap.image,e.bitmap.x,e.bitmap.y,e.bitmap.width,e.bitmap.height,0,0,e.bitmap.width,e.bitmap.height),p.restore(),e.bitmap=null,void 0):(f&&(p.fillStyle=k,p.fill()),0<a&&(p.lineWidth=a,p.strokeStyle=b,p.closePath(),p.stroke()),void 0)}),e.showList.push({type:LShape.VERTICES,arg:c}))},drawTriangles:function(a,b,c,f,k){var e,m,n,q=this,
p=b.length;q.setList.push(function(){var t,r,x,A,B,z,y;n=LGlobal.canvas;for(m=e=0;p>e;e+=3){if(n.save(),n.beginPath(),n.moveTo(a[2*b[e]],a[2*b[e]+1]),n.lineTo(a[2*b[e+1]],a[2*b[e+1]+1]),n.lineTo(a[2*b[e+2]],a[2*b[e+2]+1]),n.lineTo(a[2*b[e]],a[2*b[e]+1]),n.closePath(),f&&(n.lineWidth=f,n.strokeStyle=k,n.stroke()),n.clip(),0==e%6){if(r=-1,t=(c[2*b[e+1+m]]-c[2*b[e+m]])*q.bitmap.width,x=(c[2*b[e+2]+1]-c[2*b[e]+1])*q.bitmap.height,0==m&&0>t){for(t=e+9;p>t;t+=3)if(c[2*b[e+2]+1]==c[2*b[t+2]+1]){m=t-e;break}0==
m&&(m=p-e);t=(c[2*b[e+1+m]]-c[2*b[e+m]])*q.bitmap.width}e+m>=p?(t=(c[2*b[e+m-p]]-c[2*b[e+1]])*q.bitmap.width,r=1==c[2*b[e]]?0:q.bitmap.width*c[2*b[e]]+t,r>q.bitmap.width&&(r-=q.bitmap.width)):r=q.bitmap.width*c[2*b[e+m]];sh=q.bitmap.height*c[2*b[e]+1];0>x&&(x=(c[2*b[e+2-(0<e?6:-6)]+1]-c[2*b[e-(0<e?6:-6)]+1])*q.bitmap.height,sh=0);A=(a[2*b[e+1]]-a[2*b[e]])/t;B=(a[2*b[e+1]+1]-a[2*b[e]+1])/t;z=(a[2*b[e+2]]-a[2*b[e]])/x;y=(a[2*b[e+2]+1]-a[2*b[e]+1])/x;n.transform(A,B,z,y,a[2*b[e]],a[2*b[e]+1]);n.drawImage(q.bitmap.image,
q.bitmap.x+r,q.bitmap.y+sh,t,x,0,0,t,x)}else{if(t=(c[2*b[e+2+m]]-c[2*b[e+1+m]])*q.bitmap.width,x=(c[2*b[e+2]+1]-c[2*b[e]+1])*q.bitmap.height,0==m&&0>t){for(t=e+9;p>t;t+=3)if(c[2*b[e+2]+1]==c[2*b[t+2]+1]){m=t-e;break}0==m&&(m=p-e);t=(c[2*b[e+2+m]]-c[2*b[e+1+m]])*q.bitmap.width}e+1+m>=p?(t=(c[2*b[e+1+m-p]]-c[2*b[e+2]])*q.bitmap.width,r=1==c[2*b[e+1]]?0:q.bitmap.width*c[2*b[e+1]]+t,r>q.bitmap.width&&(r-=q.bitmap.width)):r=q.bitmap.width*c[2*b[e+1+m]];sh=q.bitmap.height*c[2*b[e]+1];0>x&&(x=(c[2*b[e+2-
(0<e?6:-6)]+1]-c[2*b[e-(0<e?6:-6)]+1])*q.bitmap.height,sh=0);A=(a[2*b[e+2]]-a[2*b[e+1]])/t;B=(a[2*b[e+2]+1]-a[2*b[e+1]+1])/t;z=(a[2*b[e+2]]-a[2*b[e]])/x;y=(a[2*b[e+2]+1]-a[2*b[e]+1])/x;n.transform(A,B,z,y,a[2*b[e+1]],a[2*b[e+1]+1]);n.drawImage(q.bitmap.image,q.bitmap.x+r,q.bitmap.y+sh,t,x,0,-x,t,x)}n.restore()}})},drawLine:function(a,b,c){this.setList.push(function(){var f=LGlobal.canvas;f.beginPath();f.moveTo(c[0],c[1]);f.lineTo(c[2],c[3]);f.lineWidth=a;f.strokeStyle=b;f.closePath();f.stroke()});
this.showList.push({type:LShape.LINE,arg:c})},add:function(a){this.setList.push(a)},ismouseon:function(a){return null!=a&&a!=UNDEFINED&&0!=this.showList.length&&this.parent?this.parent.ismouseonShapes(this.showList,a.offsetX,a.offsetY):!1},getWidth:function(){var a,b,c,f,k,e,m;a=0;for(e=this.showList.length;e>a;a++)if(this.showList[a].type==LShape.RECT)(c>this.showList[a].arg[0]||typeof c==UNDEFINED)&&(c=this.showList[a].arg[0]),(f<this.showList[a].arg[0]+this.showList[a].arg[2]||typeof f==UNDEFINED)&&
(f=this.showList[a].arg[0]+this.showList[a].arg[2]);else if(this.showList[a].type==LShape.ARC)(c>this.showList[a].arg[0]-this.showList[a].arg[2]||typeof c==UNDEFINED)&&(c=this.showList[a].arg[0]-this.showList[a].arg[2]),(f<this.showList[a].arg[0]+this.showList[a].arg[2]||typeof f==UNDEFINED)&&(f=this.showList[a].arg[0]+this.showList[a].arg[2]);else if(this.showList[a].type==LShape.VERTICES)for(b=0,m=this.showList[a].arg.length;m>b;b++)k=this.showList[a].arg[b],(c>k[0]||typeof c==UNDEFINED)&&(c=k[0]),
(f<k[0]||typeof f==UNDEFINED)&&(f=k[0]);else this.showList[a].type==LShape.LINE?((c>this.showList[a].arg[0]||typeof c==UNDEFINED)&&(c=this.showList[a].arg[0]),(c>this.showList[a].arg[2]||typeof c==UNDEFINED)&&(c=this.showList[a].arg[2]),(f<this.showList[a].arg[0]||typeof f==UNDEFINED)&&(f=this.showList[a].arg[0]),(f<this.showList[a].arg[2]||typeof f==UNDEFINED)&&(f=this.showList[a].arg[2])):this.showList[a].type==LShape.POINT&&((c>this.showList[a].arg[0]||typeof c==UNDEFINED)&&(c=this.showList[a].arg[0]),
(f<this.showList[a].arg[0]||typeof f==UNDEFINED)&&(f=this.showList[a].arg[0]));return typeof c==UNDEFINED&&(c=f=0),this.left=c,0<e&&f==c&&(f=c+1),f-c},getHeight:function(){var a,b,c,f,k,e=null,m=null,e=0;for(a=this.showList.length;a>e;e++)if(this.showList[e].type==LShape.RECT)(c>this.showList[e].arg[1]||typeof c==UNDEFINED)&&(c=this.showList[e].arg[1]),(f<this.showList[e].arg[1]+this.showList[e].arg[3]||typeof f==UNDEFINED)&&(f=this.showList[e].arg[1]+this.showList[e].arg[3]);else if(this.showList[e].type==
LShape.ARC)(c>this.showList[e].arg[1]-this.showList[e].arg[2]||typeof c==UNDEFINED)&&(c=this.showList[e].arg[1]-this.showList[e].arg[2]),(f<this.showList[e].arg[1]+this.showList[e].arg[2]||typeof f==UNDEFINED)&&(f=this.showList[e].arg[1]+this.showList[e].arg[2]);else if(this.showList[e].type==LShape.VERTICES)for(m=0,b=this.showList[e].arg.length;b>m;m++)k=this.showList[e].arg[m],(c>k[1]||typeof c==UNDEFINED)&&(c=k[1]),(f<k[1]||typeof f==UNDEFINED)&&(f=k[1]);else this.showList[e].type==LShape.LINE?
((c>this.showList[e].arg[1]||typeof c==UNDEFINED)&&(c=this.showList[e].arg[1]),(c>this.showList[e].arg[3]||typeof c==UNDEFINED)&&(c=this.showList[e].arg[3]),(f<this.showList[e].arg[1]||typeof f==UNDEFINED)&&(f=this.showList[e].arg[1]),(f<this.showList[e].arg[3]||typeof f==UNDEFINED)&&(f=this.showList[e].arg[3])):this.showList[e].type==LShape.POINT&&((c>this.showList[e].arg[1]||typeof c==UNDEFINED)&&(c=this.showList[e].arg[1]),(f<this.showList[e].arg[1]||typeof f==UNDEFINED)&&(f=this.showList[e].arg[1]));
return typeof c==UNDEFINED&&(c=f=0),this.top=c,0<a&&f==c&&(f=c+1),f-c},startX:function(){return this.getWidth(),this.left},startY:function(){return this.getHeight(),this.top}};for(c in b)a.prototype[c]=b[c];return a}();
LShape=function(){function a(){LExtends(this,LInteractiveObject,[]);this.type="LShape";this.graphics=new LGraphics;this.graphics.parent=this}var c,b;a.POINT="point";a.LINE="line";a.ARC="arc";a.RECT="rect";a.VERTICES="vertices";c={_ll_show:function(){this.graphics.ll_show()},getWidth:function(a){var b,c,f=this.graphics.startX(),k=f+this.graphics.getWidth();return a&&this.mask&&(b=this.mask._startX?this.mask._startX():this.mask.startX(),c=this.mask.getWidth(),b>f&&(f=b),k>b+c&&(k=b+c)),this.ll_left=
this.x+f,this.ll_right=this.x+k,(k-f)*this.scaleX},getHeight:function(a){var b,c,f=this.graphics.startY(),k=f+this.graphics.getHeight();return a&&this.mask&&(b=this.mask._startY?this.mask._startY():this.mask.startY(),c=this.mask.getHeight(),b>f&&(f=b),k>b+c&&(k=b+c)),this.ll_top=this.y+f,this.ll_bottom=this.y+k,(k-f)*this.scaleY},_startX:function(){return this.getWidth(),this.ll_left},startX:function(){return this._startX()*this.scaleX},_startY:function(){return this.getHeight(),this.ll_top},startY:function(){return this._startY()*
this.scaleY},clone:function(){var d=new a;return d.copyProperty(this),d.graphics=this.graphics.clone(),d.graphics.parent=d,d},ismouseon:function(a,b){var c,f=!1;return this.visible&&null!=a?this.mask&&(this.mask.parent||(this.mask.parent=this.parent),!this.mask.ismouseon(a,b))?!1:(c={x:this.x*b.scaleX+b.x,y:this.y*b.scaleY+b.y,scaleX:b.scaleX*this.scaleX,scaleY:b.scaleY*this.scaleY},this.graphics&&(f=this.graphics.ismouseon(a,c)),f):!1},die:function(){this.graphics.clear()}};for(b in c)a.prototype[b]=
c[b];return a}();
LSprite=function(){function a(){LExtends(this,LDisplayObjectContainer,[]);this.type="LSprite";this.rotatex;this.rotatey;this.graphics=new LGraphics;this.graphics.parent=this;this.box2dBody=null;this.shapes=[];this.useCursor=this.dragRange=null}var c,b={setRotate:function(a){this.box2dBody?this.box2dBody.SetAngle(a):this.rotate=a},_rotateReady:function(){this.box2dBody&&(typeof this.rotatex==UNDEFINED&&this.getRotateXY(),this.x=this.box2dBody.GetPosition().x*LGlobal.box2d.drawScale-this.parent.x-this.rotatex,
this.y=this.box2dBody.GetPosition().y*LGlobal.box2d.drawScale-this.parent.y-this.rotatey,this.rotate=this.box2dBody.GetAngle())},_ll_show:function(){this.graphics.ll_show();LGlobal.show(this.childList);this._ll_debugShape()},startDrag:function(a){this.ll_dragStart||(this.ll_touchPointID=a,this.ll_dragStartX=this.x,this.ll_dragStartY=this.y,this.ll_dragMX=mouseX,this.ll_dragMY=mouseY,this.ll_dragStart=!0,LGlobal.dragList.push(this))},stopDrag:function(){var a,b;a=0;for(b=LGlobal.dragList.length;b>
a;a++)if(this.objectIndex==LGlobal.dragList[a].objectIndex){this.ll_dragStart=!1;LGlobal.dragList.splice(a,1);break}},getRotateXY:function(a,b){a&&b||(a=this.getWidth(),b=this.getHeight());this.rotatex=a/2;this.rotatey=b/2},getWidth:function(a){var b,c,f,k,e,m,n,q=this.graphics.startX(),p=q+this.graphics.getWidth();b=0;for(c=this.childList.length;c>b;b++)f=this.childList[b],typeof f.visible!=UNDEFINED&&f.visible&&(k=f.x,"function"==typeof f._startX&&(k=f._startX()),e=k+f.getWidth(a),q>k&&(q=k),e>
p&&(p=e));return a&&this.mask&&(m=this.mask._startX?this.mask._startX():this.mask.startX(),n=this.mask.getWidth(),m>q&&(q=m),p>m+n&&(p=m+n)),this.ll_left=this.x+q,this.ll_right=this.x+p,(p-q)*this.scaleX},getHeight:function(a){var b,c,f,k,e,m,n,q=this.graphics.startY(),p=q+this.graphics.getHeight();b=0;for(c=this.childList.length;c>b;b++)f=this.childList[b],typeof f.visible!=UNDEFINED&&f.visible&&(k=f.y,"function"==typeof f._startY&&(k=f._startY()),e=k+f.getHeight(a),q>k&&(q=k),e>p&&(p=e));return a&&
this.mask&&(m=this.mask._startY?this.mask._startY():this.mask.startY(),n=this.mask.getHeight(),m>q&&(q=m),p>m+n&&(p=m+n)),this.ll_top=this.y+q,this.ll_bottom=this.y+p,(p-q)*this.scaleY},_startX:function(){return this.getWidth(),this.ll_left},startX:function(){return this._startX()*this.scaleX},_startY:function(){return this.getHeight(),this.ll_top},startY:function(){return this._startY()*this.scaleY},_ll_loopframe:function(){this.dispatchEvent(LEvent.ENTER_FRAME)},clone:function(){var d,b,c,f,k=new a;
k.copyProperty(this);k.graphics=this.graphics.clone();k.graphics.parent=k;c=k.childList.length=0;for(f=this.childList.length;f>c;c++)d=this.childList[c],d.clone&&(b=d.clone(),b.parent=k,k.childList.push(b));return k},_mevent:function(a){var b,c;for(b=0;b<this.mouseList.length;b++)if(c=this.mouseList[b],c.type==a)return!0;return!1},ll_dispatchMouseEvent:function(a,b,h,f,k){var e;if(this.mouseEnabled)for(c=0;c<this.mouseList.length;c++)e=this.mouseList[c],e.type==a&&(b.selfX=(f-(this.x*h.scaleX+h.x))/
(h.scaleX*this.scaleX),b.selfY=(k-(this.y*h.scaleY+h.y))/(h.scaleY*this.scaleY),b.currentTarget=b.clickTarget=this,b.target||(b.target=this),e.listener(b,this))},ll_mouseout:function(a,b,c,f,k){var e;if(b==LMouseEvent.MOUSE_MOVE&&this.ll_mousein&&(this.ll_mousein=!1,this._mevent(LMouseEvent.MOUSE_OUT)&&this.ll_dispatchMouseEvent(LMouseEvent.MOUSE_OUT,a,c,f,k),this.mouseChildren))for(e=this.childList.length-1;0<=e;e--)this.childList[e].mouseEvent&&this.childList[e].ll_mouseout&&this.childList[e].ll_mouseout(a,
b,c,f,k)},mouseEvent:function(a,b,c){if(!a)return!1;var f,k,e,m=a.offsetX,n=a.offsetY;if(!this.visible)return!1;if(null==c&&(c={x:0,y:0,scaleX:1,scaleY:1}),this.ismouseon(a,c)){if(LGlobal.os==OS_PC&&this.useCursor&&b==LMouseEvent.MOUSE_MOVE&&(LGlobal.cursor=this.useCursor),b!=LMouseEvent.MOUSE_MOVE||this.ll_mousein||(this.ll_mousein=!0,this._mevent(LMouseEvent.MOUSE_OVER)&&this.ll_dispatchMouseEvent(LMouseEvent.MOUSE_OVER,a,c,m,n)),this.mouseChildren){e={x:this.x*c.scaleX+c.x,y:this.y*c.scaleY+c.y,
scaleX:c.scaleX*this.scaleX,scaleY:c.scaleY*this.scaleY};for(k=this.childList.length-1;0<=k&&(!this.childList[k].mouseEvent||(f=this.childList[k].mouseEvent(a,b,e),!f||(a.target=this.childList[k],b==LMouseEvent.MOUSE_MOVE)));k--);this._mevent(b)&&this.ll_dispatchMouseEvent(b,a,c,m,n)}return!0}return this.ll_mouseout(a,b,c,m,n),!1},hitTestPoint:function(a,b){var c=this.shapes;return c&&0!=c.length||(this.getWidth(),this.getHeight(),c=[{type:LShape.RECT,arg:[this.ll_left-this.x,this.ll_top-this.y,this.ll_right-
this.ll_left,this.ll_bottom-this.ll_top]}]),this.ismouseonShapes(c,a,b)},hitTestObject:function(a){var b,c,f,k,e,m,n,q,p=this.shapes,t=a.shapes;p&&0!=p.length||(this.getWidth(),this.getHeight(),p=[{type:LShape.RECT,arg:[this.ll_left-this.x,this.ll_top-this.y,this.ll_right-this.ll_left,this.ll_bottom-this.ll_top]}]);t&&0!=t.length||(a.getWidth(),a.getHeight(),t=[{type:LShape.RECT,arg:[a.ll_left-a.x,a.ll_top-a.y,a.ll_right-a.ll_left,a.ll_bottom-a.ll_top]}]);b=this.getRootMatrix();c=a.getRootMatrix();
for(f=p.length-1;0<=f;f--)for(k=p[f],q=this._changeShape(k.type,k.arg,b),e=t.length-1;0<=e;e--)if(m=t[e],n=a._changeShape(m.type,m.arg,c),k.type==LShape.VERTICES||k.type==LShape.RECT)if(m.type==LShape.VERTICES||m.type==LShape.RECT){if(LGlobal.hitTestPolygon(q,n))return!0}else{if(m.type==LShape.ARC&&LGlobal.hitTestPolygonArc(q,n))return!0}else if(m.type==LShape.VERTICES||m.type==LShape.RECT){if(LGlobal.hitTestPolygonArc(n,q))return!0}else if(m.type==LShape.ARC&&Math.sqrt((q[0]-n[0])*(q[0]-n[0])+(q[1]-
n[1])*(q[1]-n[1]))<q[2]+n[2])return!0;return!1},addShape:function(a,b){if(!(a==LShape.VERTICES&&3>b.length))return this.shapes.push({type:a,arg:b}),this.shapes},addShapes:function(a){this.shapes=0==this.shapes.length?a:this.shapes.concat(a)},clearShape:function(){this.shapes=[]},_ll_debugShape:function(){var a,b,c,f,k,e,m;if(LGlobal.traceDebug&&0!=this.shapes.length)for(a=0,b=this.shapes.length;b>a;a++){if(c=this.shapes[a],f=LGlobal.canvas,k=c.arg,f.beginPath(),c.type==LShape.RECT)f.rect(k[0],k[1],
k[2],k[3]);else if(c.type==LShape.ARC)f.arc(k[0],k[1],k[2],0,2*Math.PI);else if(c.type==LShape.VERTICES){f.moveTo(k[0][0],k[0][1]);e=1;for(m=k.length;m>e;e++)f.lineTo(k[e][0],k[e][1]);f.lineTo(k[0][0],k[0][1])}f.closePath();f.strokeStyle="#00FF00";f.stroke()}},ismouseon:function(a,b){var c,f,k,e;if(!this.visible||null==a||this.mask&&(this.mask.parent||(this.mask.parent=this.parent),!this.mask.ismouseon(a,b)))return!1;if(this.shapes&&0<this.shapes.length)return this.ismouseonShapes(this.shapes,a.offsetX,
a.offsetY);f=!1;k=this.childList;e={x:this.x*b.scaleX+b.x,y:this.y*b.scaleY+b.y,scaleX:b.scaleX*this.scaleX,scaleY:b.scaleY*this.scaleY};for(c=k.length-1;0<=c;c--)if(k[c].ismouseon&&(f=k[c].ismouseon(a,e)),f){a.target=this.childList[c];break}return f||(f=this.graphics.ismouseon(a,e)),f},die:function(){var a,b,c;this.graphics.clear();this.removeAllEventListener();this.stopDrag();this.box2dBody&&this.clearBody();a=0;b=this.childList;for(c=b.length;c>a;a++)b[a].die&&b[a].die()}};for(c in b)a.prototype[c]=
b[c];return a}();
LButton=function(){function a(d,b,c,f){LExtends(this,LSprite,[]);this.type="LButton";this.addChild(d);b?this.addChild(b):b=d;c?this.addChild(c):c=b;f?this.addChild(f):f=d;this.upState=this.bitmap_up=d;this.overState=this.bitmap_over=b;this.downState=c;this.disableState=f;this._ll_down_sx=this.downState.scaleX;this._ll_down_sy=this.downState.scaleY;this.overState.visible=!1;this.downState.visible=!1;this.buttonMode=this.upState.visible=!0;this.staticMode=!1;this.setState(a.STATE_ENABLE);LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&
LMouseEventContainer.pushButton(this);this.addEventListener(LMouseEvent.MOUSE_DOWN,this.ll_modeDown);this.setCursorEnabled(!0)}var c,b;a.STATE_DISABLE="disable";a.STATE_ENABLE="enable";c={setState:function(d){if(d==a.STATE_DISABLE)this.upState.visible=!1,this.overState.visible=!1,this.downState.visible=!1,this.disableState.visible=!0,this.mouseEnabled=!1;else{if(d!=a.STATE_ENABLE)return;this.overState.visible=!1;this.downState.visible=!1;this.disableState.visible=!1;this.mouseEnabled=this.upState.visible=
!0}this.state=d},ll_mouseout:function(a){this.ll_mousein&&(a.clickTarget=this,this.ll_modeOut(a),this.ll_mousein=!1)},mouseEvent:function(a,b){return a?(b==LMouseEvent.MOUSE_MOVE&&this.ll_button_mode&&this.ll_button_mode(a),this.callParent("mouseEvent",arguments)):!1},ll_button_mode:function(a){this.visible&&(a.clickTarget=this,this.hitTestPoint(a.offsetX,a.offsetY)?this.ll_modeOver(a):this.ll_modeOut(a))},ll_modeDown:function(d){var b,c,f,k,e,m,n,q,p=d.clickTarget;if(p.buttonMode&&!p.tween){if(p.state==
a.STATE_DISABLE)return p.upState.visible=!1,p.overState.visible=!1,p.downState.visible=!1,p.disableState.visible=!0,void 0;p.upState.visible=!1;p.overState.visible=!1;p.downState.visible=!0;p._tweenOver=p.ll_modeOver;d=function(a){a=a.parent;delete a.tween;a._tweenOver({clickTarget:a});delete a._tweenOver};p.staticMode?p.tween=LTweenLiteTimeline.to(p.downState,.3,{}).to(p.downState,.1,{onComplete:d}):(b=p.downState.getWidth(),c=p.downState.getHeight(),f=1.1*b,k=1.1*c,e=p.downState.x,m=p.downState.y,
n=e+.5*(b-f),q=m+.5*(c-k),p.tween=LTweenLiteTimeline.to(p.downState,.3,{x:n,y:q,scaleX:1.1*p._ll_down_sx,scaleY:1.1*p._ll_down_sy,ease:Quart.easeOut}).to(p.downState,.1,{x:e,y:m,scaleX:p._ll_down_sx,scaleY:p._ll_down_sy,ease:Quart.easeOut,onComplete:d}))}},ll_modeOver:function(d){d=d.clickTarget;if(d.buttonMode){if(d.tween)return d._tweenOver=d.ll_modeOver,void 0;if(d.state==a.STATE_DISABLE)return d.upState.visible=!1,d.overState.visible=!1,d.downState.visible=!1,d.disableState.visible=!0,void 0;
d.upState.visible=!1;d.downState.visible=!1;d.overState.visible=!0}},ll_modeOut:function(d){d=d.clickTarget;if(d.buttonMode){if(d.tween)return d._tweenOver=d.ll_modeOut,void 0;if(d.state==a.STATE_DISABLE)return d.upState.visible=!1,d.overState.visible=!1,d.downState.visible=!1,d.disableState.visible=!0,void 0;d.overState.visible=!1;d.downState.visible=!1;d.upState.visible=!0}},setCursorEnabled:function(a){this.useCursor=a?"pointer":null},clone:function(){return new a(this.upState.clone(),this.overState.clone(),
this.downState.clone(),this.disableState.clone())},die:function(){LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&LMouseEventContainer.removeButton(this);this.callParent("die",arguments)}};for(b in c)a.prototype[b]=c[b];return a}();LBlendMode.SOURCE_OVER="source-over";LBlendMode.SOURCE_ATOP="source-atop";LBlendMode.SOURCE_IN="source-in";LBlendMode.SOURCE_OUT="source-out";LBlendMode.DESTINATION_OVER="destination-over";LBlendMode.DESTINATION_ATOP="destination-atop";
LBlendMode.DESTINATION_IN="destination-in";LBlendMode.DESTINATION_OUT="destination-out";LBlendMode.LIGHTER="lighter";LBlendMode.COPY="copy";LBlendMode.XOR="xor";LBlendMode.NONE=null;LBlendMode.NORMAL=null;LTextFieldType=function(){throw"LTextFieldType cannot be instantiated";};LTextFieldType.INPUT="input";LTextFieldType.DYNAMIC=null;
LStyleSheet=function(){function a(){LExtends(this,LObject,[]);this.styleIndex=0;this.styleNames={}}return a.prototype.clone=function(){var a=new this.constructor;return a.copyProperty(this),a},a.prototype.setStyle=function(a,b){var d,g,h;if(this.styleIndex++,null===b)return this.styleNames[a]&&delete this.styleNames[a],void 0;h=b.replace(/(^\{)|(\}$)/g,"").split(";");b={};for(d=0;d<h.length;d++)h[d]&&(g=h[d].split(":"),g[0]&&(b[g[0]]=g[1]));this.styleNames[a]=b},a.prototype.getStyle=function(a){return this.styleNames[a]},
a}();
LTextFormat=function(){function a(a,b,d,g,h,f){LExtends(this,LObject,[]);this.font=a?a:"Arial";this.size=b?b:15;this.color=d?d:"#000000";this.bold=g?g:!1;this.italic=h?h:!1;this.underline=f?f:!1}return a.prototype.clone=function(){var a=new this.constructor;return a.copyProperty(this),a},a.prototype.getFontText=function(){return(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.size+"px "+this.font},a.prototype.setCss=function(a){for(var b in a)switch(b){case "color":this.color=a[b];break;case "font-family":this.font=
a[b];break;case "font-size":this.size=a[b];break;case "font-style":this.italic="italic"==a[b];break;case "font-weight":this.bold="bold"==a[b];break;case "text-decoration":this.color="underline"==a[b]}},a}();
LTextField=function(){function a(){LExtends(this,LInteractiveObject,[]);this.type="LTextField";this.texttype=null;this.styleSheet=this.htmlText=this.text="";this.font="Arial";this.size=15;this.color="#000000";this.weight="normal";this.textAlign="left";this.textBaseline="top";this.heightMode=a.HEIGHT_MODE_BOTTOM;this.stroke=!1;this.lineWidth=1;this.lineColor="#000000";this.width=150;this.height=this.size;this.multiline=this.wordWrap=this.displayAsPassword=!1;this.numLines=1;this.speed=0;this._speedIndex=
100}var c,b;a.HEIGHT_MODE_BOTTOM="bottom";a.HEIGHT_MODE_BASELINE="baseline";c={_showReady:function(a){a.font=this.weight+" "+this.size+"px "+this.font;a.textAlign=this.textAlign;a.textBaseline=this.textBaseline},ll_getStyleSheet:function(a,b,c,f){var k,e,m;a=a.clone();if("font"==b)for(b=0;c&&!(4<b++)&&(k=/(([^\s]*?)(\s*)=(\s*)("|')(.*?)\5)*/g,e=k.exec(c),e&&e[0]);){switch(e[2]){case "face":a.font=e[6];break;case "color":a.color=e[6];break;case "size":a.size=e[6]}c=c.replace(e[0],"").replace(/(^\s*)|(\s*$)|(\n)/g,
"")}else if("b"==b)a.bold=!0;else if("u"==b)a.underline=!0;else if("i"==b)a.italic=!0;else if("p"==b&&this.wordWrap)f="\n"+f+"\n";else if(this.styleSheet){if("span"==b){if(k=/(([^\s]*?)(\s*)=(\s*)("|')(.*?)\5)*/g,e=k.exec(c),e&&e[0])switch(e[2]){case "class":m=this.styleSheet.getStyle("."+e[6])}}else this.styleSheet.getStyle(b)&&(m=this.styleSheet.getStyle(b));m&&a.setCss(m)}this.ll_getHtmlText(a,f)},ll_getHtmlText:function(a,b){if(b){var c,f,k,e=/<(.*?)(\s*)(.*?)>(.*?)<\/\1>/g.exec(b);if(!e||!e[0])return this.ll_htmlTexts.push({textFormat:a.clone(),
text:b}),void 0;0<e.index&&this.ll_htmlTexts.push({textFormat:a.clone(),text:b.substring(0,e.index)});c=e[1];k=f=e.index;do k=b.indexOf("</"+c,k+1),f=b.indexOf("<"+c,f+1);while(0<f&&k>f);f=b.substring(b.indexOf(">",e.index)+1,k);this.ll_getStyleSheet(a,c,e[3],f);this.ll_getHtmlText(a,b.substring(k+c.length+3))}},_ll_show:function(d){var b,c,f,k,e,m,n,q,p,t,r=this;if(r.texttype!=LTextFieldType.INPUT||(r.inputBackLayer.ll_show(),b=r.getRootCoordinate(),LGlobal.inputBox.name=="input"+r.objectIndex&&
(LGlobal.inputBox.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+((b.y+r.inputBackLayer.startY())*parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>>0)+"px",LGlobal.inputBox.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+((b.x+r.inputBackLayer.startX())*parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width>>>0)+"px"),!LGlobal.inputTextField||LGlobal.inputTextField.objectIndex!=r.objectIndex)){if(LGlobal.fpsStatus&&LGlobal.fpsStatus.text++,d.fillStyle=
r.color,r.stroke&&(d.strokeStyle=r.lineColor,d.lineWidth=r.lineWidth+1),r.htmlText)return(r.ll_htmlText!=r.htmlText||r.styleSheet&&(r.ll_style_objectIndex!=r.styleSheet.objectIndex||r.ll_styleIndex==r.styleSheet.styleIndex))&&(p=new LTextFormat,r.ll_htmlTexts=[],r.ll_htmlText=r.htmlText,r.styleSheet&&(r.ll_style_objectIndex=r.styleSheet.objectIndex,r.ll_styleIndex=r.styleSheet.styleIndex),r.ll_getHtmlText(p,r.htmlText)),f=0,e=0,m=0,r._wordHeight=r.wordHeight||30,a.underlineY||(a.underlineY={alphabetic:0,
top:1,bottom:-.2,middle:.4,hanging:.8}),r.ll_htmlTexts.forEach(function(b){var g=b.textFormat;b=b.text;d.font=g.getFontText();d.fillStyle=g.color;c=0;for(k=b.length;k>c;c++)(q=/(?:\r\n|\r|\n|n)/.exec(b.substr(c,1)))?(f=0,e=c+1,m++):(n=1.2*d.measureText("O").width,r.stroke&&d.strokeText(b.substr(c,1),f,m*r._wordHeight),d.fillText(b.substr(c,1),f,m*r._wordHeight),g.underline&&(d.beginPath(),t=m*r._wordHeight+n*a.underlineY[r.textBaseline],d.moveTo(f,t),d.lineTo(f+d.measureText(b.substr(c,1)).width,
t),d.stroke())),f+=d.measureText(b.substr(c,1)).width,r.wordWrap&&f+d.measureText(b.substr(c+1,1)).width>r.width&&(f=0,e=c+1,m++);r.height=(m+1)*r._wordHeight}),void 0;if(b=r.text,r.displayAsPassword)for(b="",c=0,k=r.text.length;k>c;c++)b+="*";if(r.wordWrap||r.multiline){c=m=e=f=0;for(k=r.text.length;k>c;c++)(q=/(?:\r\n|\r|\n|n)/.exec(b.substr(c,1)))?(f=0,e=c+1,m++):(r.stroke&&d.strokeText(b.substr(c,1),f,m*r.wordHeight),d.fillText(b.substr(c,1),f,m*r.wordHeight)),r.numLines=m,f=d.measureText(r.text.substr(e,
c+1-e)).width,r.wordWrap&&f+d.measureText(b.substr(c,1)).width>r.width&&(f=0,e=c+1,m++);r.height=(m+1)*r.wordHeight}else r.numLines=1,r.stroke&&d.strokeText(b,0,0,d.measureText(b).width),d.fillText(b,0,0,d.measureText(b).width);r.windRunning&&r._ll_windRun()}},_wordHeight:function(a){0<a?this.wordHeight=a:(this.wordWrap=!1,this.wordHeight=this.getHeight());this.height=0},setMultiline:function(a,b){a&&this._wordHeight(b);this.multiline=a},setWordWrap:function(a,b){a&&this._wordHeight(b);this.wordWrap=
a},setType:function(a,b){this.texttype!=a&&a==LTextFieldType.INPUT?(null==b||"LSprite"!=b.type?(this.inputBackLayer=new LSprite,this.inputBackLayer.graphics.drawRect(1,"#000000",[0,.4*-this.getHeight(),this.width,1.5*this.getHeight()])):this.inputBackLayer=b,this.inputBackLayer.parent=this,LMouseEventContainer.container[LMouseEvent.MOUSE_DOWN]&&LMouseEventContainer.pushInputBox(this)):(this.inputBackLayer=null,LMouseEventContainer.removeInputBox(this));this.texttype=a},ismouseon:function(a,b){return a?
this.visible?(b||(b={x:0,y:0,scaleX:1,scaleY:1}),this.mask&&(this.mask.parent||(this.mask.parent=this.parent),!this.mask.ismouseon(a,b))?!1:this.inputBackLayer?this.inputBackLayer.ismouseon(a,{x:this.x*b.scaleX+b.x,y:this.y*b.scaleY+b.y,scaleX:b.scaleX*this.scaleX,scaleY:b.scaleY*this.scaleY}):this.ismouseonShapes([{type:LShape.RECT,arg:[0,0,this._getWidth(),this._getHeight()]}],a.offsetX,a.offsetY)):!1:!1},clone:function(){var a=new this.constructor;return a.copyProperty(this),a.texttype=null,this.texttype==
LTextFieldType.INPUT&&a.setType(LTextFieldType.INPUT),a},mouseEvent:function(a,b,c){var f;null!=this.inputBackLayer&&b==LMouseEvent.MOUSE_DOWN&&(f=this.ismouseon(a,c),f&&this.focus())},_ll_getValue:function(){LGlobal.inputBox.style.display!=NONE&&(LGlobal.inputTextField.text=LGlobal.inputTextBox.value,LEvent.removeEventListener(LGlobal.inputTextBox,LKeyboardEvent.KEY_DOWN,LGlobal.inputTextField._ll_input),LGlobal.inputBox.style.display=NONE,LGlobal.inputTextField.dispatchEvent(LFocusEvent.FOCUS_OUT),
LGlobal.inputTextField=null)},updateInput:function(){this.texttype==LTextFieldType.INPUT&&LGlobal.inputTextField.objectIndex==this.objectIndex&&(LGlobal.inputTextBox.value=LGlobal.inputTextField.text)},_ll_input:function(a){var b=new LEvent(LTextEvent.TEXT_INPUT);b.keyCode=a.keyCode;LGlobal.inputTextField.text=LGlobal.inputTextBox.value;a.returnValue=LGlobal.inputTextField.hasEventListener(LTextEvent.TEXT_INPUT)?LGlobal.inputTextField.dispatchEvent(b):!0},focus:function(){var a,b;this.parent&&this.texttype==
LTextFieldType.INPUT&&(LGlobal.inputTextField&&LGlobal.inputTextField.objectIndex!=this.objectIndex&&this._ll_getValue(),this.dispatchEvent(LFocusEvent.FOCUS_IN),a=this.getAbsoluteScale(),LGlobal.inputBox.style.display="",LGlobal.inputBox.name="input"+this.objectIndex,LGlobal.inputTextField=this,LGlobal.inputTextareaBoxObj.style.display=NONE,LGlobal.inputTextBoxObj.style.display=NONE,LGlobal.passwordBoxObj.style.display=NONE,LGlobal.inputTextBox=this.displayAsPassword?LGlobal.passwordBoxObj:this.multiline?
LGlobal.inputTextareaBoxObj:LGlobal.inputTextBoxObj,b=parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width,sy=parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height,LGlobal.inputTextBox.style.display="",LGlobal.inputTextBox.value=this.text,LGlobal.inputTextBox.style.height=this.inputBackLayer.getHeight()*a.scaleY*this.scaleY*sy+"px",LGlobal.inputTextBox.style.width=this.inputBackLayer.getWidth()*a.scaleX*this.scaleX*b+"px",LGlobal.inputTextBox.style.color=this.color,LGlobal.inputTextBox.style.fontSize=
(this.size*parseFloat(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>0)+"px",LGlobal.inputTextBox.style.fontFamily=this.font,LEvent.addEventListener(LGlobal.inputTextBox,LKeyboardEvent.KEY_DOWN,LGlobal.inputTextField._ll_input),this.texttype==LTextFieldType.INPUT&&(rc=this.getRootCoordinate(),LGlobal.inputBox.name=="input"+this.objectIndex&&(LGlobal.inputBox.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+((rc.y+this.inputBackLayer.startY())*parseInt(LGlobal.canvasObj.style.height)/
LGlobal.canvasObj.height>>>0)+"px",LGlobal.inputBox.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+((rc.x+this.inputBackLayer.startX())*parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width>>>0)+"px")),setTimeout(function(){LGlobal.inputTextBox.focus()},0))},_getWidth:function(){return this.wordWrap?this.width:(LGlobal.canvas.font=this.size+"px "+this.font,LGlobal.canvas.measureText(this.text).width)},getWidth:function(a){var b,c,f;return b=this._getWidth()*this.scaleX,a&&
this.mask?(c=this.mask._startX?this.mask._startX():this.mask.startX(),c>b?0:(f=this.mask.getWidth(),c+f>b?b-c:f)):b},_getHeight:function(){var b,c,h,f,k,e,m=LGlobal.canvas;if(this.wordWrap){if(m.font=this.weight+" "+this.size+"px "+this.font,0==this.height){b=k=f=0;for(c=this.text.length;c>b;b++)h=m.measureText(this.text.substr(f,b-f)).width,e=/(?:\r\n|\r|\n|n)/.exec(this.text.substr(b,1)),(this.wordWrap&&h>this.width||e)&&(f=b,k++,e&&f++);this.height=(k+1)*this.wordHeight}return this.height}return m.font=
this.weight+" "+this.size+"px "+this.font,c=1.2*m.measureText("O").width,this.heightMode==a.HEIGHT_MODE_BASELINE&&(c*=1.2),c},getHeight:function(a){var b,c,f;return b=this._getHeight()*this.scaleY,a&&this.mask?(c=this.mask._startY?this.mask._startY():this.mask.startY(),c>b?0:(f=this.mask.getHeight(),c+f>b?b-c:f)):b},wind:function(a){this.wind_over_function=a;this.windRunning=!0;this._ll_wind_text=this.text;this.text="";this._ll_wind_length=0},_ll_windRun:function(){if(!(this._speedIndex++<this.speed)){if(this._speedIndex=
0,this._ll_wind_length>this._ll_wind_text.length)return this.windRunning=!1,this.wind_over_function&&this.wind_over_function(),this.dispatchEvent(new LEvent(LTextEvent.WIND_COMPLETE)),void 0;this.text=this._ll_wind_text.substring(0,this._ll_wind_length);this._ll_wind_length++}},die:function(){LMouseEventContainer.removeInputBox(this)}};for(b in c)a.prototype[b]=c[b];return a}();
LBitmap=function(){function a(a){LExtends(this,LDisplayObject,[]);this.type="LBitmap";this.rotateCenter=!0;(this.bitmapData=a)&&(this.width=this.bitmapData.width,this.height=this.bitmapData.height)}var c,b={_canShow:function(){return this.visible&&this.bitmapData},_rotateReady:function(){0!=this.rotate&&this.rotateCenter?(this.rotatex=.5*this.getWidth(),this.rotatey=.5*this.getHeight()):this.rotatex=this.rotatey=0},_coordinate:function(){},_ll_show:function(){this.ll_draw()},ll_draw:function(){LGlobal.fpsStatus&&
LGlobal.fpsStatus.bitmapData++;LGlobal.canvas.drawImage(this.bitmapData.image,this.bitmapData.x,this.bitmapData.y,this.bitmapData.width,this.bitmapData.height,this.x,this.y,this.bitmapData.width,this.bitmapData.height)},clone:function(){var b=new a(this.bitmapData.clone());return b.copyProperty(this),b.rotateCenter=this.rotateCenter,b},ismouseon:function(a,b){return a?this.visible&&this.bitmapData?this.mask&&(this.mask.parent||(this.mask.parent=this.parent),!this.mask.ismouseon(a,b))?!1:this.ismouseonShapes([{type:LShape.RECT,
arg:[0,0,this.bitmapData.width,this.bitmapData.height]}],a.offsetX,a.offsetY):!1:!1},getWidth:function(a){var b,c,f;return b=null!=this.bitmapData?this.bitmapData.width*(0<this.scaleX?this.scaleX:-this.scaleX):0,a&&this.mask?(c=this.mask._startX?this.mask._startX():this.mask.startX(),c>b?0:(f=this.mask.getWidth(),c+f>b?b-c:f)):b},getHeight:function(a){var b,c,f;return b=null!=this.bitmapData?this.bitmapData.height*(0<this.scaleY?this.scaleY:-this.scaleY):0,a&&this.mask?(c=this.mask._startY?this.mask._startY():
this.mask.startY(),c>b?0:(f=this.mask.getHeight(),c+f>b?b-c:f)):b},startX:function(){return this.x},startY:function(){return this.y},die:function(){}};for(c in b)a.prototype[c]=b[c];return a}();
LBitmapData=function(){function a(b,c,h,f,k,e){if(LExtends(this,LObject,[]),this.type="LBitmapData",typeof e==UNDEFINED&&(e=a.DATA_IMAGE),this.oncomplete=null,this._locked=!1,this._setPixel=!1,this.x=null==c?0:c,this.y=null==h?0:h,this.width=0,this.height=0,this.dataType=null,b&&"object"==typeof b)this.image=b,this.dataType=a.DATA_IMAGE,this.width=null==f?this.image.width:f,this.height=null==k?this.image.height:k,this._setDataType(e);else{if(this._createCanvas(),this.dataType=a.DATA_CANVAS,this._canvas.width=
this.width=null==f?1:f,this._canvas.height=this.height=null==k?1:k,"string"==typeof b&&(b=parseInt(b.replace("#","0x"))),"number"==typeof b){c=this._context.createImageData(this.width,this.height);for(h=0;h<c.data.length;h+=4)c.data[h+0]=255&b>>16,c.data[h+1]=255&b>>8,c.data[h+2]=255&b,c.data[h+3]=255;this._context.putImageData(c,0,0)}this.image=this._canvas;e==a.DATA_IMAGE&&this._setDataType(e)}this.resize()}var c,b;a.DATA_IMAGE="data_image";a.DATA_CANVAS="data_canvas";c={_setDataType:function(b){this.dataType!=
b&&(b==a.DATA_CANVAS?(this._createCanvas(),this._canvas.width=this.image.width,this._canvas.height=this.image.height,this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._context.drawImage(this.image,0,0),this.image=this._canvas):b==a.DATA_IMAGE&&(this.image=new Image,this.image.width=this._canvas.width,this.image.height=this._canvas.height,this.image.src=this._canvas.toDataURL()),this.dataType=b)},_createCanvas:function(){this._canvas||(this._canvas=document.createElement("canvas"),
this._context=this._canvas.getContext("2d"))},clear:function(){this._createCanvas();this._canvas.width=this.image.width;this.dataType==a.DATA_IMAGE&&(this.image.src=this._canvas.toDataURL())},setProperties:function(a,b,c,f){this.x=a;this.y=b;this.width=c;this.height=f;this.resize()},setCoordinate:function(a,b){this.x=a;this.y=b;this.resize()},clone:function(){return new a(this.image,this.x,this.y,this.width,this.height,this.dataType)},_ready:function(){this._dataType=this.dataType;this._setDataType(a.DATA_CANVAS);
this._data=this._context.getImageData(this.x,this.y,this.width,this.height)},_update:function(){this._context.putImageData(this._data,this.x,this.y,0,0,this.width,this.height);this._setDataType(this._dataType);this._data=null},getPixel:function(a,b,c){var f,k;return a>>=0,b>>=0,this._locked||this._ready(),f=4*this.width*b+4*a,k=this._data.data,this._locked||this._update(),"number"==c?k[f]<<16|k[f+1]<<8|k[f+2]:[k[f],k[f+1],k[f+2],k[f+3]]},setPixel:function(a,b,c){var f;a>>=0;b>>=0;this._locked||this._ready();
f=this._data;a=4*this.width*b+4*a;"object"==typeof c?(f.data[a+0]=c[0],f.data[a+1]=c[1],f.data[a+2]=c[2],f.data[a+3]=c[3]):("string"==typeof c&&(c=parseInt(c.replace("#","0x"))),f.data[a+0]=255&c>>16,f.data[a+1]=255&c>>8,f.data[a+2]=255&c,f.data[a+3]=255);this._locked||this._update()},getPixels:function(a){var b;return this._locked||this._ready(),b=this._context.getImageData(this.x+a.x,this.y+a.y,a.width,a.height),this._locked||this._update(),b},setPixels:function(a,b){var c,f,k,e,m,n;if(this._locked||
this._ready(),k=this._data,"object"==typeof b)for(e=this._canvas.width,m=a.x;m<a.right;m++)for(n=a.y;n<a.bottom;n++)c=4*e*(this.y+n)+4*(this.x+m),f=4*b.width*(n-a.y)+4*(m-a.x),k.data[c+0]=b.data[f+0],k.data[c+1]=b.data[f+1],k.data[c+2]=b.data[f+2],k.data[c+3]=b.data[f+3];else for("string"==typeof b&&(b=parseInt(b.replace("#","0x"))),b=[255&b>>16,255&b>>8,255&b],e=this._canvas.width,m=a.x;m<a.right;m++)for(n=a.y;n<a.bottom;n++)c=4*e*(this.y+n)+4*(this.x+m),k.data[c+0]=b[0],k.data[c+1]=b[1],k.data[c+
2]=b[2],k.data[c+3]=255;this._locked||this._update()},putPixels:function(b,c){this.dataType==a.DATA_CANVAS&&"object"==typeof c&&this._context.putImageData(c,this.x+b.x,this.y+b.y,0,0,b.width,b.height)},lock:function(){this._locked=!0;this._ready()},unlock:function(){this._locked=!1;this._update()},draw:function(b,c,h,f,k){var e,m,n,q,p,t=!1,r=this.dataType;return this._setDataType(a.DATA_CANVAS),(c||h||f||k)&&(this._context.save(),t=!0),k&&(b instanceof a?(m=b.x,n=b.y):m=n=0,b=new a(b.getDataCanvas(),
m+k.x,n+k.y,k.width,k.height,a.DATA_CANVAS)),q=b.getWidth()>>>0,p=b.getHeight()>>>0,0==q||0==p?(this._setDataType(r),void 0):(e=b.getDataCanvas(),h&&(b.colorTransform(new LRectangle(0,0,q,p),h),e=b.image),c&&this._context.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty),f&&(this._context.globalCompositeOperation=f),this._context.drawImage(e,b.x,b.y,q,p,0,0,q,p),t&&this._context.restore(),this._setDataType(r),this.resize(),void 0)},getDataCanvas:function(){var b=this.dataType;return this._setDataType(a.DATA_CANVAS),
this._setDataType(b),this._canvas},getWidth:function(){return this.width},getHeight:function(){return this.height},resize:function(){var a=this.image.width-this.x,b=this.image.height-this.y;this.width=this.width<a?this.width:a;this.height=this.height<b?this.height:b},colorTransform:function(b,c){var h,f,k,e,m,n,q,p;if(this.dataType==a.DATA_CANVAS){b.x>>0;b.y>>0;b.width>>0;b.height>>0;h=this._context.getImageData(this.x+b.x,this.y+b.y,b.width,b.height);f=h.data;k=0;for(e=f.length;e>k;k+=4)m=k,n=k+
1,q=k+2,p=k+3,f[m]=f[m]*c.redMultiplier+c.redOffset,f[n]=f[n]*c.greenMultiplier+c.greenOffset,f[q]=f[q]*c.blueMultiplier+c.blueOffset,f[p]=f[p]*c.alphaMultiplier+c.alphaOffset;this._context.putImageData(h,this.x+b.x,this.y+b.y,0,0,b.width,b.height)}},copyPixels:function(b,c,h){var f,k,e,m;this.dataType==a.DATA_CANVAS&&(f=b.x,k=b.y,e=b.width,m=b.height,b.setProperties(c.x+b.x,c.y+b.y,c.width,c.height),this._context.drawImage(b.image,b.x,b.y,b.width,b.height,h.x,h.y,b.width,b.height),b.x=f,b.y=k,b.width=
e,b.height=m)}};for(b in c)a.prototype[b]=c[b];return a}();
LDropShadowFilter=function(){function a(a,b,c,f){LExtends(this,LObject,[]);this.type="LDropShadowFilter";this.distance=a?a:0;this.angle=b?b:0;this.shadowColor=c?c:"#000000";this.shadowBlur=f?f:20;this.setShadowOffset()}var c,b={setShadowOffset:function(){var a=this.angle*Math.PI/180;this.shadowOffsetX=this.distance*Math.cos(a);this.shadowOffsetY=this.distance*Math.sin(a)},ll_show:function(){var a=LGlobal.canvas;a.shadowColor=this.shadowColor;a.shadowBlur=this.shadowBlur;a.shadowOffsetX=this.shadowOffsetX;
a.shadowOffsetY=this.shadowOffsetY},setDistance:function(a){this.distance=a;this.setShadowOffset()},setAngle:function(a){this.angle=a;this.setShadowOffset()},setColor:function(a){this.shadowColor=a},setBlur:function(a){this.shadowBlur=a}};for(c in b)a.prototype[c]=b[c];return a}();
LAnimation=function(){function a(a,b,c){LExtends(this,LSprite,[]);this.type="LAnimation";this._ll_stepIndex=this.colIndex=this.rowIndex=0;this._ll_stepArray=[];this.mode=1;this.isMirror=!1;this.bitmapList=Array.isArray(b)?b:[b];this.bitmap=new LBitmap(this.bitmapList[0]);this.imageArray=c;this.addChild(this.bitmap);null!=a&&a.addChild(this);this.onframe();this.colIndex=0}var c,b={setAction:function(a,b,c,f){var k=!1;null!=a&&0<=a&&a<this.imageArray.length&&(this.rowIndex=a,k=!0);null!=b&&0<=b&&b<
this.imageArray[a].length&&(this.colIndex=b,k=!0);null!=c&&(this.mode=c,k=!0);null!=f&&(this.isMirror=f,this.isMirror?(this.bitmap.x=this.bitmap.getWidth(),this.bitmap.scaleX=-1*Math.abs(this.bitmap.scaleX)):(this.bitmap.x=0,this.bitmap.scaleX=Math.abs(this.bitmap.scaleX)),k=!0);k&&(this._ll_stepIndex=0,this._send_complete=!1)},getAction:function(){return[this.rowIndex,this.colIndex,this.mode,this.isMirror]},onframe:function(){var a,b=0,c=null;if(this.colIndex>=this.imageArray[this.rowIndex].length&&
(this.colIndex=0),a=this.imageArray[this.rowIndex][this.colIndex],c=this._ll_stepArray[this.rowIndex]&&this._ll_stepArray[this.rowIndex][this.colIndex]?this._ll_stepArray[this.rowIndex][this.colIndex]:0,0==this._ll_stepIndex){if("number"==typeof a.dataIndex&&Array.isArray(this.bitmapList)&&a.dataIndex<this.bitmapList.length&&(this.bitmap.bitmapData=this.bitmapList[a.dataIndex]),a.script)for(i=0;i<a.script.length;i++)obj=a.script[i],(l=this.ll_labelList[obj.name])&&l.rowIndex==this.rowIndex&&l.colIndex==
this.colIndex&&l.mode==this.mode&&l.isMirror==(-1==this.bitmap.scaleX)&&obj.func(this,obj.params);typeof a.width!=UNDEFINED&&typeof a.height!=UNDEFINED?this.bitmap.bitmapData.setProperties(a.x,a.y,a.width,a.height):this.bitmap.bitmapData.setCoordinate(a.x,a.y);typeof a.sx!=UNDEFINED&&(b=a.sx);typeof a.sy!=UNDEFINED&&(this.bitmap.y=a.sy);typeof a.mirror!=UNDEFINED&&(this.bitmap.rotateCenter=!1,this.bitmap.scaleX=a.mirror?-1:1);this.bitmap.x=b+(1==this.bitmap.scaleX?0:this.bitmap.getWidth())}this._ll_stepIndex++<
c||(this._ll_stepIndex=0,this.colIndex+=this.mode,(this.colIndex>=this.imageArray[this.rowIndex].length||0>this.colIndex)&&(this.colIndex=0<this.mode?0:this.imageArray[this.rowIndex].length-1,"LAnimationTimeline"==this.constructor.name?this._send_complete=!0:this.dispatchEvent(LEvent.COMPLETE)))},clone:function(){var a=new this.constructor(null,this.bitmapList,this.imageArray.slice(0));return a.copyProperty(this),a.childList.length=0,a.bitmap=this.bitmap.clone(),a.addChild(a.bitmap),a}};for(c in b)a.prototype[c]=
b[c];return a}();
LAnimationTimeline=function(){function a(a,b){var c,f,k,e;LExtends(this,LAnimation,[null,a,b]);this.type="LAnimationTimeline";this._speedIndex=this.speed=0;this.ll_labelList={};for(e=0;e<b.length;e++)for(c=b[e],f=0;f<c.length;f++)k=c[f],k.label&&this.setLabel(k.label,e,f,1,k.isMirror?!0:!1);this.addEventListener(LEvent.ENTER_FRAME,this._ll_onframe)}var c,b={clone:function(){var a,b,c=new this.constructor(this.bitmapList,this.imageArray.slice(0));c.copyProperty(this);c.childList.length=0;c.bitmap=
this.bitmap.clone();c.addChild(c.bitmap);for(a in this.ll_labelList)b=this.ll_labelList[a],c.ll_labelList[a]={rowIndex:b.rowIndex,colIndex:b.colIndex,mode:b.mode,isMirror:b.isMirror};return c},setFrameSpeedAt:function(a,b,c){this._ll_stepArray[a]||(this._ll_stepArray[a]=[]);this._ll_stepArray[a][b]=c},_ll_onframe:function(a){a=a.target;a._ll_stop||a._speedIndex++<a.speed||a._send_complete&&(a.dispatchEvent(LEvent.COMPLETE),a._send_complete=!1,a._ll_stop)||(a._speedIndex=0,a.onframe())},setLabel:function(a,
b,c,f,k){this.ll_labelList[a]={rowIndex:b,colIndex:c,mode:typeof f==UNDEFINED?1:f,isMirror:typeof k==UNDEFINED?!1:k}},play:function(){this._ll_stop=!1},stop:function(){this._ll_stop=!0},gotoAndPlay:function(a){a=this.ll_labelList[a];this.setAction(a.rowIndex,a.colIndex,a.mode,a.isMirror);this.onframe();this.play()},gotoAndStop:function(a){a=this.ll_labelList[a];this.setAction(a.rowIndex,a.colIndex,a.mode,a.isMirror);this.onframe();this.stop()},addFrameScript:function(a,b,c){var f=this.ll_labelList[a],
f=this.imageArray[f.rowIndex][f.colIndex];f.script||(f.script=[]);f.script.push({func:b,params:c,name:a})},removeFrameScript:function(a){var b,c,f;c=this.ll_labelList[a];if(c=this.imageArray[c.rowIndex][c.colIndex].script)for(f=0;f<c.length;f++)if(b=c[f],b.name==a){c.splice(f,1);break}}};for(c in b)a.prototype[c]=b[c];return a}();
LLoadManage=function(){function a(){this.llname="ll.file.";this.llload="ll.load."}return a.prototype={load:function(a,b,d){return a&&0!=a.length?(this.list=a,this.onupdate=b,this.oncomplete=d,this.loader=this,this.index=0,this.loadIndex=0,this.result=[],this.lresult=[],this.loadInit(),void 0):(d([]),void 0)},loadInit:function(){this.index>=this.list.length||(this.loadIndex=0,this.loadStart(),this.reloadtime=setTimeout(this.loadInit.bind(this),1E4))},loadStart:function(){var a,b;this.loadIndex>=this.list.length||
(a=this.list[this.loadIndex],a.name||(a.name=this.llname+this.loadIndex),this.lresult[this.llload+a.name]||(a.type||(b=getExtension(a.path),"txt"==b?a.type=LURLLoader.TYPE_TEXT:"js"==b?a.type=LURLLoader.TYPE_JS:0<=["mp3","ogg","wav","m4a"].indexOf(b)&&(a.type=LSound.TYPE_SOUND)),a.type==LURLLoader.TYPE_TEXT||a.type==LURLLoader.TYPE_JS?(this.loader=new LURLLoader,this.loader.name=a.name,this.loader.addEventListener(LEvent.COMPLETE,this.loadComplete.bind(this)),this.loader.load(this.url(a.path),a.type)):
a.type==LSound.TYPE_SOUND?(this.loader=new LSound,this.loader.name=a.name,this.loader.addEventListener(LEvent.COMPLETE,this.loadComplete.bind(this)),this.loader.load(a.path)):(this.loader=new LLoader,this.loader.name=a.name,this.loader.addEventListener(LEvent.COMPLETE,this.loadComplete.bind(this)),this.loader.load(this.url(a.path),LLoader.TYPE_BITMAPDATE))),this.loadIndex++,this.loadStart())},loadComplete:function(a){var b;if(a&&a.currentTarget&&a.currentTarget.name){if(a.currentTarget.removeEventListener(LEvent.COMPLETE,
this.loadComplete),0<=a.currentTarget.name.indexOf(this.llname)&&(a.target=1),this.lresult[this.llload+a.currentTarget.name])return;this.result[a.currentTarget.name]=a.target;this.lresult[this.llload+a.currentTarget.name]=1}this.index++;this.onupdate&&this.onupdate(Math.floor(100*this.index/this.list.length));this.index>=this.list.length&&(this.reloadtime&&clearTimeout(this.reloadtime),this.loader=null,b=this.result,LGlobal.forceRefresh=!0,this.oncomplete(b))},url:function(a){return LGlobal.traceDebug?
a+(0<=a.indexOf("?")?"&":"?")+"t="+(new Date).getTime():a}},a.load=function(c,b,d){(new a).load(c,b,d)},a}();
LEasing={None:{easeIn:function(a,c,b,d){return c+a*b/d},easeOut:function(a,c,b,d){return c+a*b/d},easeInOut:function(a,c,b,d){return c+a*b/d}},Quad:{easeIn:function(a,c,b,d){return b*(a/=d)*a+c},easeOut:function(a,c,b,d){return-b*(a/=d)*(a-2)+c},easeInOut:function(a,c,b,d){return 1>(a/=d/2)?b/2*a*a+c:-b/2*(--a*(a-2)-1)+c}},Cubic:{easeIn:function(a,c,b,d){return b*(a/=d)*a*a+c},easeOut:function(a,c,b,d){return b*((a=a/d-1)*a*a+1)+c},easeInOut:function(a,c,b,d){return 1>(a/=d/2)?b/2*a*a*a+c:b/2*((a-=
2)*a*a+2)+c}},Quart:{easeIn:function(a,c,b,d){return b*(a/=d)*a*a*a+c},easeOut:function(a,c,b,d){return-b*((a=a/d-1)*a*a*a-1)+c},easeInOut:function(a,c,b,d){return 1>(a/=d/2)?b/2*a*a*a*a+c:-b/2*((a-=2)*a*a*a-2)+c}},Quint:{easeIn:function(a,c,b,d){return b*(a/=d)*a*a*a*a+c},easeOut:function(a,c,b,d){return b*((a=a/d-1)*a*a*a*a+1)+c},easeInOut:function(a,c,b,d){return 1>(a/=d/2)?b/2*a*a*a*a*a+c:b/2*((a-=2)*a*a*a*a+2)+c}},Sine:{easeIn:function(a,c,b,d){return-b*Math.cos(a/d*(Math.PI/2))+b+c},easeOut:function(a,
c,b,d){return b*Math.sin(a/d*(Math.PI/2))+c},easeInOut:function(a,c,b,d){return-b/2*(Math.cos(Math.PI*a/d)-1)+c}},Strong:{easeIn:function(a,c,b,d){return b*(a/=d)*a*a*a*a+c},easeOut:function(a,c,b,d){return b*((a=a/d-1)*a*a*a*a+1)+c},easeInOut:function(a,c,b,d){return 1>(a/=d/2)?b/2*a*a*a*a*a+c:b/2*((a-=2)*a*a*a*a+2)+c}},Expo:{easeIn:function(a,c,b,d){return 0==a?c:b*Math.pow(2,10*(a/d-1))+c},easeOut:function(a,c,b,d){return a==d?c+b:b*(-Math.pow(2,-10*a/d)+1)+c},easeInOut:function(a,c,b,d){return 0==
a?c:a==d?c+b:1>(a/=d/2)?b/2*Math.pow(2,10*(a-1))+c:b/2*(-Math.pow(2,-10*--a)+2)+c}},Circ:{easeIn:function(a,c,b,d){return-b*(Math.sqrt(1-(a/=d)*a)-1)+c},easeOut:function(a,c,b,d){return b*Math.sqrt(1-(a=a/d-1)*a)+c},easeInOut:function(a,c,b,d){return 1>(a/=d/2)?-b/2*(Math.sqrt(1-a*a)-1)+c:b/2*(Math.sqrt(1-(a-=2)*a)+1)+c}},Elastic:{easeIn:function(a,c,b,d,g,h){var f;return 0==a?c:1==(a/=d)?c+b:(h||(h=.3*d),!g||g<Math.abs(b)?(g=b,f=h/4):f=h/(2*Math.PI)*Math.asin(b/g),-(g*Math.pow(2,10*--a)*Math.sin(2*
(a*d-f)*Math.PI/h))+c)},easeOut:function(a,c,b,d,g,h){var f;return 0==a?c:1==(a/=d)?c+b:(h||(h=.3*d),!g||g<Math.abs(b)?(g=b,f=h/4):f=h/(2*Math.PI)*Math.asin(b/g),g*Math.pow(2,-10*a)*Math.sin(2*(a*d-f)*Math.PI/h)+b+c)},easeInOut:function(a,c,b,d,g,h){var f;return 0==a?c:2==(a/=d/2)?c+b:(h||(h=.3*d*1.5),!g||g<Math.abs(b)?(g=b,f=h/4):f=h/(2*Math.PI)*Math.asin(b/g),1>a?-.5*g*Math.pow(2,10*--a)*Math.sin(2*(a*d-f)*Math.PI/h)+c:.5*g*Math.pow(2,-10*--a)*Math.sin(2*(a*d-f)*Math.PI/h)+b+c)}},Back:{easeIn:function(a,
c,b,d,g){return typeof g==UNDEFINED&&(g=1.70158),b*(a/=d)*a*((g+1)*a-g)+c},easeOut:function(a,c,b,d,g){return typeof g==UNDEFINED&&(g=1.70158),b*((a=a/d-1)*a*((g+1)*a+g)+1)+c},easeInOut:function(a,c,b,d,g){return typeof g==UNDEFINED&&(g=1.70158),1>(a/=d/2)?b/2*a*a*(((g*=1.525)+1)*a-g)+c:b/2*((a-=2)*a*(((g*=1.525)+1)*a+g)+2)+c}},Bounce:{easeIn:function(a,c,b,d){return b-LEasing.Bounce.easeOut(d-a,0,b,d)+c},easeOut:function(a,c,b,d){return(a/=d)<1/2.75?7.5625*b*a*a+c:2/2.75>a?b*(7.5625*(a-=1.5/2.75)*
a+.75)+c:2.5/2.75>a?b*(7.5625*(a-=2.25/2.75)*a+.9375)+c:b*(7.5625*(a-=2.625/2.75)*a+.984375)+c},easeInOut:function(a,c,b,d){return d/2>a?.5*LEasing.Bounce.easeIn(2*a,0,b,d)+c:.5*LEasing.Bounce.easeOut(2*a-d,0,b,d)+.5*b+c}}};Quad=LEasing.Quad;Cubic=LEasing.Cubic;Quart=LEasing.Quart;Quint=LEasing.Quint;Sine=LEasing.Sine;Strong=LEasing.Strong;Expo=LEasing.Expo;Circ=LEasing.Circ;Elastic=LEasing.Elastic;Back=LEasing.Back;Bounce=LEasing.Bounce;
LTweenLite=function(){function a(a,b,c){LExtends(this,LObject,[]);this.type="LTweenLiteChild";this.toNew=[];this.init(a,b,c)}function c(){LExtends(this,LObject,[]);this.type="LTweenLite";this.tweens=[]}var b,d,g={init:function(a,b,d){var e,g,n=null;typeof d.tweenTimeline==UNDEFINED&&(d.tweenTimeline=c.TYPE_FRAME);this.target=a;this.duration=b||.001;this.vars=d;this.delay=this.vars.delay||0;this.vars.tweenTimeline==c.TYPE_TIMER?(this.currentTime=(new Date).getTime()/1E3,this.initTime=this.currentTime,
this.startTime=this.initTime+this.delay):(this.currentTime=0,this.duration*=1E3,this.currentTime-=1E3*this.delay);this.combinedTimeScale=this.vars.timeScale||1;this.active=0==this.duration&&0==this.delay;this.varsto={};this.varsfrom={};this.varsDiff={};this.varsListIndex={};this.varsListCurr={};this.varsListTo={};this.varsListLength={};this.stop=!1;"function"!=typeof this.vars.ease&&(this.vars.ease=LEasing.None.easeIn);this.ease=this.vars.ease;delete this.vars.ease;this.vars.onComplete&&(this.onComplete=
this.vars.onComplete,delete this.vars.onComplete);this.vars.onUpdate&&(this.onUpdate=this.vars.onUpdate,delete this.vars.onUpdate);this.vars.onStart&&(this.onStart=this.vars.onStart,delete this.vars.onStart);for(n in this.vars)if("coordinate"==n&&Array.isArray(this.vars[n])){a=0;b={x:this.target.x,y:this.target.y};d=0;for(e=this.vars[n].length;e>d;d++)g=this.vars[n][d],a+=LPoint.distance(g,b),b=g;this.varsListIndex[n]=0;this.varsListCurr[n]=0;this.varsListTo[n]=a;this.varsto[n]=this.vars[n];this.varsfrom[n]=
{x:this.target.x,y:this.target.y}}else"number"==typeof this.vars[n]&&(this.varsto[n]=this.vars[n],this.varsfrom[n]=this.target[n],this.varsDiff[n]=this.vars[n]-this.target[n])},pause:function(){this.stop=!0},resume:function(){this.stop=!1},tween:function(){var a,d,g,e,m,n,q,p=this.vars.tweenTimeline==c.TYPE_TIMER;if(p){if(d=(new Date).getTime()/1E3,g=d-this.startTime,0>g)return}else if(this.stop||(this.currentTime+=LGlobal.speed,0>this.currentTime))return;for(b in this.varsto)if(typeof this.varsListTo[b]==
UNDEFINED)this.target[b]=this.ease(p?g:this.currentTime,this.varsfrom[b],this.varsDiff[b],this.duration);else{d=this.ease(p?g:this.currentTime,0,this.varsListTo[b],this.duration);d>this.varsListTo[b]&&(d=this.varsListTo[b]);e=0<this.varsListIndex[b]?this.vars[b][this.varsListIndex[b]-1]:this.varsfrom[b];m=this.vars[b][this.varsListIndex[b]];for(n=LPoint.distance(e,m);this.varsListCurr[b]+n<d;)this.varsListCurr[b]+=n,e=m,this.varsListIndex[b]++,m=this.vars[b][this.varsListIndex[b]],n=LPoint.distance(e,
m);this.target.x=e.x;this.target.y=e.y;0!=n&&0!=m.x-e.x&&(this.target.x+=(m.x-e.x)*(d-this.varsListCurr[b])/n);0!=n&&0!=m.y-e.y&&(this.target.y+=(m.y-e.y)*(d-this.varsListCurr[b])/n)}if(this.onStart&&(this._dispatchEvent(this.onStart),delete this.onStart),p?g>=this.duration:this.currentTime>=this.duration){for(a in this.varsto)typeof this.varsListTo[a]==UNDEFINED?this.target[a]=this.varsto[a]:(q=this.varsto[a][this.vars[a].length-1],this.target.x=q.x,this.target.y=q.y);return this.onComplete&&this._dispatchEvent(this.onComplete),
!0}return this.onUpdate&&this._dispatchEvent(this.onUpdate),!1},_dispatchEvent:function(a){this.target.target=this.target;this.target.currentTarget=this;a(this.target);delete this.target.currentTarget;delete this.target.target},to:function(a,b,c){return this.toNew.push({target:a,duration:b,vars:c}),this},keep:function(){var a,b,c;if(0<this.toNew.length){if(a=this.toNew.shift(),a.vars.loop&&(this.loop=!0),this.loop){b={};for(c in a.vars)b[c]=a.vars[c];this.to(a.target,a.duration,b)}return this.init(a.target,
a.duration,a.vars),!0}return!1}};for(b in g)a.prototype[b]=g[b];c.TYPE_FRAME="type_frame";c.TYPE_TIMER="type_timer";g={count:function(){return this.tweens.length},ll_show:function(){var a,b,c=this.tweens.length;for(a=0;c>a;a++)(b=this.tweens[a])&&b.tween&&b.tween()&&(this.tweens.splice(a,1),a--,c=this.tweens.length,b.keep()&&this.add(b))},to:function(b,c,d){var e;if(b)return e=new a({},0,{}),this.tweens.push(e),e.to(b,c,d),e},add:function(a){this.tweens.push(a)},remove:function(a){var b,c;if(typeof a!=
UNDEFINED)for(b=0,c=this.tweens.length;c>b;b++)if(a.objectIndex==this.tweens[b].objectIndex){this.tweens.splice(b,1);break}},removeAll:function(){this.tweens.splice(0,this.tweens.length)},pauseAll:function(){for(var a=0,b=this.tweens.length;b>a;a++)this.tweens[a].pause()},resumeAll:function(){for(var a=0,b=this.tweens.length;b>a;a++)this.tweens[a].resume()}};for(b in g)c.prototype[b]=g[b];return LTweenLiteTimeline=new c,LGlobal.childList.push(LTweenLiteTimeline),d=new c,d.TYPE_FRAME=c.TYPE_FRAME,
d.TYPE_TIMER=c.TYPE_TIMER,LGlobal.childList.push(d),d}();
LAjax=function(){function a(){this.responseType=null}return a.prototype={TEXT:"text",JSON:"json",ARRAY_BUFFER:"arraybuffer",BLOB:"blob",get:function(a,b,d,g){this.getRequest("GET",a,b,d,g)},post:function(a,b,d,g){this.getRequest("POST",a,b,d,g)},getRequest:function(a,b,d,g,h){var f,k,e=this,m="",n="";if(e.err=h,k=e.getHttp()){if(d)for(f in d)m+=n+f+"="+d[f],n="&";if("get"==a.toLowerCase()&&0<m.length&&(b+=(0<=b.indexOf("?")?"&":"?")+m,m=null),k.open(a,b,!0),e.responseType){if(e.responseType==e.JSON)try{k.responseType=
e.responseType}catch(q){k.responseType=e.TEXT,k._responseType="json"}else k.responseType=e.responseType;e.responseType=e.TEXT}k.setRequestHeader("Content-Type","application/x-www-form-urlencoded");k.onreadystatechange=function(){4==k.readyState&&(200<=k.status&&300>k.status||304===k.status?g&&(k._responseType==e.JSON?(k._responseType=e.TEXT,g(JSON.parse(k.responseText))):k.responseType==e.ARRAY_BUFFER||k.responseType==e.BLOB||k.responseType==e.JSON?g(k.response):0<k.responseText.length?g(k.responseText):
g(null)):h&&h(k))};k.send(m)}},getHttp:function(){if(typeof XMLHttpRequest!=UNDEFINED)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(b){this.err||this.err(b)}}return!1}},new a}();
LStageWebView=function(){function a(){LExtends(this,LEventDispatcher,[]);this.display=document.createElement("div");this.iframe=document.createElement("iframe");this.display.style.position="absolute";this.display.style.marginTop="0px";this.display.style.marginLeft="0px";this.display.style.zIndex=11;LGlobal.ios&&(this.display.style.overflow="auto",this.display.style.webkitOverflowScrolling="touch");this.display.appendChild(this.iframe);this.idAdded=!1}var c,b={loadURL:function(a){var b=this;b.iframe.src=
a;b.iframe.onload=function(){b.dispatchEvent(LEvent.COMPLETE)}},show:function(){this.idAdded||(LGlobal.object.appendChild(this.display),this.idAdded=!0);"none"==this.display.style.display&&(this.display.style.display="")},die:function(){LGlobal.object.removeChild(this.display);this.idAdded=!1},hide:function(){this.display.style.display="none"},setViewPort:function(a){var b=parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width,c=parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height;
this.display.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+(a.y*c>>>0)+"px";this.display.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+(a.x*b>>>0)+"px";this.iframe.style.width=this.display.style.width=(a.width*b>>>0)+"px";this.iframe.style.height=this.display.style.height=(a.height*c>>>0)+"px"}};for(c in b)a.prototype[c]=b[c];return a}();
FPS=function(){function a(){var a,b;LExtends(this,LSprite,[]);LGlobal.fpsStatus||(LGlobal.fpsStatus={a:0,b:0,c:0,d:0,e:0,bitmapData:0,display:0,transform:0,graphics:0,text:0,reset:function(){this.a=this.bitmapData;this.b=this.display-1;this.c=this.transform-1;this.d=this.graphics-1;this.e=this.text-5;this.text=this.graphics=this.transform=this.display=this.bitmapData=0}});this.fps=[];this.back=new LShape;this.back.alpha=.5;this.addChild(this.back);for(a=0;5>a;a++)b=new LTextField,b.color="#ffffff",
b.y=20*a,this.addChild(b),this.fps.push(b);this.fpsCount=0;this.fpsTime=(new Date).getTime();this.addEventListener(LEvent.ENTER_FRAME,this.showFPS)}return a.prototype.showFPS=function(a){var b,d=a.currentTarget;d.fpsCount++;a=(new Date).getTime();1E3>a-d.fpsTime||(d.fps[0].text="FPS:"+Math.round(1E4*d.fpsCount/(a-d.fpsTime))/10,b=LGlobal.fpsStatus,d.fps[1].text="DisplayObject:"+b.c+"/"+b.b,d.fps[2].text="Draw image:"+b.a,d.fps[3].text="Draw graphics:"+b.d,d.fps[4].text="Draw text:"+b.e,d.fpsTime=
a,d.fpsCount=0,d.back.graphics.clear(),d.back.graphics.drawRect(0,"#000000",[0,0,d.fps[1].getWidth(),100],!0,"#000000"))},a.prototype.die=function(){LGlobal.fpsStatus=null;this.callParent("die",arguments)},a}();LGlobal.screenWidth=document.documentElement.clientWidth||window.innerWidth;LGlobal.screenHeight=document.documentElement.clientHeight||window.innerHeight;LGlobal.designWidth=640;LGlobal.designHeight=1136;LGlobal.radio=1;LTextField.cutX=0;LTextField.cutY=0;
LGlobal.updateFullScreen=function(){LGlobal.stageScale==LStageScaleMode.SHOW_ALL&&(LGlobal.radio=LGlobal.screenHeight/LGlobal.designHeight);switch(LGlobal.stageScale){case LStageScaleMode.SHOW_ALL:var a=LGlobal.screenHeight/LGlobal.designHeight;LGlobal.stage.scaleX=a;LGlobal.stage.scaleY=a;switch(LGlobal.align){case LStageAlign.MIDDLE:LGlobal.stage.x=.5*(LGlobal.screenWidth-LGlobal.designWidth*a);break;case LStageAlign.LEFT:LGlobal.stage.x=0;break;case LStageAlign.right:LGlobal.stage.x=LGlobal.screenWidth-
LGlobal.designWidth*a}break;case LStageScaleMode.NO_BORDER:switch(a=LGlobal.screenWidth/LGlobal.designWidth,LGlobal.stage.scaleX=a,LGlobal.stage.scaleY=a,LGlobal.align){case LStageAlign.MIDDLE:LGlobal.stage.y=.5*(LGlobal.screenHeight-LGlobal.designHeight*a);break;case LStageAlign.TOP:LGlobal.stage.y=0;break;case LStageAlign.BOTTOM:LGlobal.stage.y=LGlobal.screenHeight-LGlobal.designHeight*a}}};
LGraphics.prototype.beginGradientFill=function(a,c,b){var d;d=4<a.length?LGlobal.canvas.createRadialGradient(a[0],a[1],a[2],a[3],a[4],a[5]):LGlobal.canvas.createLinearGradient(a[0],a[1],a[2],a[3]);a=c.length;for(var g=0;g<a;g++)d.addColorStop(b[g],c[g]);this.add(function(){LGlobal.canvas.fillStyle=d})};
LGraphics.prototype.lineGradientStyle=function(a,c,b,d){var g;g=4<c.length?LGlobal.canvas.createRadialGradient(c[0],c[1],c[2],c[3],c[4],c[5]):LGlobal.canvas.createLinearGradient(c[0],c[1],c[2],c[3]);c=b.length;for(var h=0;h<c;h++)g.addColorStop(d[h],b[h]);this.add(function(){LGlobal.canvas.lineWidth=a;LGlobal.canvas.strokeStyle=g})};
LGraphics.prototype.decodePath=function(a){var c={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},b=[2,2,4,6,0],d=0,g=a.length,h=[],f=0,k=0;this.add(function(){LGlobal.canvas.beginPath()});for(var e=[];d<g;){var m=a.charAt(d),n=c[m],q=
n>>3;if(n&3)throw"bad path data (@"+d+"): "+m;m=b[q];q||(f=k=0);h.length=0;d++;for(var n=(n>>2&1)+2,p=0;p<m;p++){var t=c[a.charAt(d)],r=t>>5?-1:1,t=(t&31)<<6|c[a.charAt(d+1)];3==n&&(t=t<<6|c[a.charAt(d+2)]);t=r*t/10;p%2?f=t+=f:k=t+=k;h[p]=t;d+=n}0==q?(this.moveTo(h[0],h[1]),e.push([h[0],h[1]])):1==q?(this.lineTo(h[0],h[1]),e.push([h[0],h[1]])):2==q?(this.curveTo(h[0],h[1],h[2],h[3]),e.push([h[0],h[1]],[h[2],h[3]])):4==q&&this.closePath()}this.showList=[];this.showList.push({type:LShape.VERTICES,arg:e})};
LGraphics.prototype.curveTo=function(a,c,b,d){this.add(function(){LGlobal.canvas.quadraticCurveTo(a,c,b,d)})};LGraphics.prototype.beginFill=function(a){this.add(function(){LGlobal.canvas.fillStyle=a})};LGraphics.prototype.beginStroke=function(a,c){this.add(function(){LGlobal.canvas.lineWidth=a;LGlobal.canvas.strokeStyle=c})};
LDisplayObject.prototype._transformRotate=function(){var a;void 0==this.skewX&&(this.skewX=0);void 0==this.skewY&&(this.skewY=0);if(0!=this.rotate||0!=this.skewX||0!=this.skewY)a=LGlobal.canvas,rotateFlag=Math.PI/180,rotateObj=new LMatrix,typeof this.rotatex==UNDEFINED&&(this.rotatey=this.rotatex=0),this.box2dBody&&(rotateFlag=1),0!=this.rotate?(rotateObj.a=Math.cos(this.rotate*rotateFlag),rotateObj.b=Math.sin(this.rotate*rotateFlag),rotateObj.c=-rotateObj.b,rotateObj.d=rotateObj.a):(rotateObj.a=
Math.cos(this.skewY*rotateFlag),rotateObj.b=Math.sin(this.skewY*rotateFlag),rotateObj.c=Math.sin(-this.skewX*rotateFlag),rotateObj.d=Math.cos(this.skewX*rotateFlag)),rotateObj.tx=this.x+this.rotatex,rotateObj.ty=this.y+this.rotatey,rotateObj.transform(a).setTo(1,0,0,1,-rotateObj.tx,-rotateObj.ty).transform(a)};
LLoadManage.loadStart=function(){var a,c;this.loadIndex>=this.list.length||(a=this.list[this.loadIndex],a.name||(a.name=this.llname+this.loadIndex),this.lresult[this.llload+a.name]||(a.type||(c=getExtension(a.path),"txt"==c?a.type=LURLLoader.TYPE_TEXT:"js"==c?a.type=LURLLoader.TYPE_JS:0<=["mp3","ogg","wav","m4a"].indexOf(c)?a.type=LSound.TYPE_SOUND:0<="mp4 3gp mov 3g2 ogv webm".split(" ").indexOf(c)&&(a.type="video")),a.type==LURLLoader.TYPE_TEXT||a.type==LURLLoader.TYPE_JS?(this.loader=new LURLLoader,
this.loader.name=a.name,this.loader.addEventListener(LEvent.COMPLETE,this.loadComplete.bind(this)),this.loader.load(this.url(a.path),a.type)):a.type==LSound.TYPE_SOUND?(this.loader=new LSound,this.loader.name=a.name,this.loader.addEventListener(LEvent.COMPLETE,this.loadComplete.bind(this)),this.loader.load(a.path)):"video"==a.type?(this.loader=new LVideo,this.loader.name=a.name,this.loader.addEventListener(LEvent.COMPLETE,this.loadComplete.bind(this)),this.loader.load(a.path)):(this.loader=new LLoader,
this.loader.name=a.name,this.loader.addEventListener(LEvent.COMPLETE,this.loadComplete.bind(this)),this.loader.load(this.url(a.path),LLoader.TYPE_BITMAPDATE))),this.loadIndex++,this.loadStart())};
LTextField.prototype._ll_show=function(a){var c=this,b,d,g,h,f,k,e,m,n;if(c.texttype==LTextFieldType.INPUT){c.inputBackLayer.ll_show();b=c.getRootCoordinate();if(LGlobal.inputBox.name=="input"+c.objectIndex){LGlobal.inputBox.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+((b.y+c.inputBackLayer.startY())*parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>>0)+"px";if(LGlobal.stageScale=LStageScaleMode.SHOW_ALL)LGlobal.inputBox.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)*
LGlobal.radio+((b.y+c.inputBackLayer.startY())*parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>>0)+"px";LGlobal.inputBox.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+((b.x+c.inputBackLayer.startX()*LGlobal.radio)*parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width>>>0)+"px"}if(LGlobal.inputTextField&&LGlobal.inputTextField.objectIndex==c.objectIndex)return}LGlobal.fpsStatus&&LGlobal.fpsStatus.text++;a.fillStyle=c.color;c.stroke&&(a.strokeStyle=c.lineColor,
a.lineWidth=c.lineWidth+1);if(c.htmlText){if(c.ll_htmlText!=c.htmlText||c.styleSheet&&(c.ll_style_objectIndex!=c.styleSheet.objectIndex||c.ll_styleIndex==c.styleSheet.styleIndex))b=new LTextFormat,c.ll_htmlTexts=[],c.ll_htmlText=c.htmlText,c.styleSheet&&(c.ll_style_objectIndex=c.styleSheet.objectIndex,c.ll_styleIndex=c.styleSheet.styleIndex),c.ll_getHtmlText(b,c.htmlText);k=f=g=0;c._wordHeight=c.wordHeight||30;LTextField.underlineY||(LTextField.underlineY={alphabetic:0,top:1,bottom:-.2,middle:.4,
hanging:.8});c.ll_htmlTexts.forEach(function(b){var p=b.textFormat;b=b.text;a.font=p.getFontText();a.fillStyle=p.color;d=0;for(h=b.length;d<h;d++)(m=/(?:\r\n|\r|\n|n)/.exec(b.substr(d,1)))?(g=0,f=d+1,k++):(e=1.2*a.measureText("O").width,c.stroke&&a.strokeText(b.substr(d,1),g,k*c._wordHeight),a.fillText(b.substr(d,1),g,k*c._wordHeight),p.underline&&(a.beginPath(),n=k*c._wordHeight+e*LTextField.underlineY[c.textBaseline],a.moveTo(g,n),a.lineTo(g+a.measureText(b.substr(d,1)).width,n),a.stroke())),g+=
a.measureText(b.substr(d,1)).width,c.wordWrap&&g+a.measureText(b.substr(d+1,1)).width>c.width&&(g=0,f=d+1,k++);c.height=(k+1)*c._wordHeight})}else{b=c.text;if(c.displayAsPassword)for(b="",d=0,h=c.text.length;d<h;d++)b+="*";if(c.wordWrap||c.multiline){d=k=f=g=0;for(h=c.text.length;d<h;d++)(m=/(?:\r\n|\r|\n|n)/.exec(b.substr(d,1)))?(g=0,f=d+1,k++):(c.stroke&&a.strokeText(b.substr(d,1),g,k*c.wordHeight),a.fillText(b.substr(d,1),g,k*c.wordHeight)),c.numLines=k,g=a.measureText(c.text.substr(f,d+1-f)).width,
c.wordWrap&&g+a.measureText(b.substr(d,1)).width>c.width&&(g=0,f=d+1,k++);c.height=(k+1)*c.wordHeight}else c.numLines=1,c.stroke&&a.strokeText(b,0,0,a.measureText(b).width),a.fillText(b,0,0,a.measureText(b).width);c.windRunning&&c._ll_windRun()}};
LTextField.prototype.focus=function(){var a,c;if(this.parent&&this.texttype==LTextFieldType.INPUT){LGlobal.inputTextField&&LGlobal.inputTextField.objectIndex!=this.objectIndex&&this._ll_getValue();this.dispatchEvent(LFocusEvent.FOCUS_IN);a=this.getAbsoluteScale();LGlobal.inputBox.style.display="";LGlobal.inputBox.name="input"+this.objectIndex;LGlobal.inputTextField=this;LGlobal.inputTextareaBoxObj.style.display=NONE;LGlobal.inputTextBoxObj.style.display=NONE;LGlobal.passwordBoxObj.style.display=NONE;
LGlobal.inputTextBox=this.displayAsPassword?LGlobal.passwordBoxObj:this.multiline?LGlobal.inputTextareaBoxObj:LGlobal.inputTextBoxObj;c=parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width;sy=parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height;LGlobal.inputTextBox.style.display="";LGlobal.inputTextBox.value=this.text;LGlobal.inputTextBox.style.height=this.inputBackLayer.getHeight()*a.scaleY*this.scaleY*sy+"px";LGlobal.inputTextBox.style.width=this.inputBackLayer.getWidth()*
a.scaleX*this.scaleX*c+"px";LGlobal.inputTextBox.style.color=this.color;LGlobal.inputTextBox.style.fontSize=(this.size*parseFloat(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>0)+"px";LGlobal.inputTextBox.style.fontFamily=this.font;if(LGlobal.stageScale=LStageScaleMode.SHOW_ALL)sy=LGlobal.radio,LGlobal.inputTextBox.style.padding="0px",LGlobal.inputTextBox.style.textAlign=this.textAlign,LGlobal.inputTextBox.style.border="none",LGlobal.inputTextBox.style.outline="none",LGlobal.inputTextBox.style.height=
this.inputBackLayer.getHeight()*sy+"px",LGlobal.inputTextBox.style.fontSize=(this.size-.5)*LGlobal.radio+"px",LGlobal.inputTextBox.style.width=this.inputBackLayer.getWidth()*sy+"px";LEvent.addEventListener(LGlobal.inputTextBox,LKeyboardEvent.KEY_DOWN,LGlobal.inputTextField._ll_input);this.texttype==LTextFieldType.INPUT&&(rc=this.getRootCoordinate(),LGlobal.inputBox.name=="input"+this.objectIndex&&((LGlobal.stageScale=LStageScaleMode.SHOW_ALL)?(LGlobal.inputBox.style.marginTop=-LGlobal.width+"px",
LGlobal.inputBox.style.marginLeft=-LGlobal.height+"px"):(LGlobal.inputBox.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+((rc.y+this.inputBackLayer.startY())*parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>>0)+"px",LGlobal.inputBox.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+((rc.x+this.inputBackLayer.startX())*parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width>>>0)+"px")));setTimeout(function(){LGlobal.inputTextBox.focus()},0)}};
LTextField.prototype._ll_getValue=function(){LGlobal.inputBox.style.display!=NONE&&(LGlobal.inputTextField.text=LGlobal.inputTextBox.value,LEvent.removeEventListener(LGlobal.inputTextBox,LKeyboardEvent.KEY_DOWN,LGlobal.inputTextField._ll_input),LGlobal.inputBox.style.display=NONE,setTimeout(function(){LGlobal.inputTextBox.blur()},0),LGlobal.inputTextField.dispatchEvent(LFocusEvent.FOCUS_OUT),LGlobal.inputTextField=null)};
function Flash2xInputText(a,c,b){base(this,LSprite,[]);this.textField=new LTextField;this.textField.textAlign=b;this.textField.width=a;this.textField.height=c;var d=0;"center"==b?d=-a/2:this.textField.setWordWrap(!0,c);this.textField.space=d;b=new LSprite;b.graphics.drawRect(0,"#000000",[d,0,a,c]);this.textField.setType(LTextFieldType.INPUT,b);a=new LSprite;a.graphics.drawRect(0,"#000000",[d,0,b.getWidth()-.4*c,b.getHeight()]);this.textField.mask=a;this.addChild(this.textField)}
LGlobal.isMobile=function(){var a=!1;if(/AppleWebKit.*Mobile/i.test(navigator.userAgent)||/MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/.test(navigator.userAgent))a=!0;return a};var FlashFrame=function(){this.frameInfos=[];this.keyFrameIndex=0;this.soundScene=this.soundName=this.eventName="";this.soundTimes=1};FlashFrame.prototype.setDisplayInfo=function(a,c,b,d,g,h,f,k,e,m){var n={};n.display=a;void 0==c&&(c=0);void 0==b&&(b=0);void 0==g&&(g=1);void 0==h&&(h=1);void 0==f&&(f=0);void 0==k&&(k=0);void 0==e&&(e=0);void 0==d&&(d=1);void 0==m&&(m="normal");n.x=c;n.y=b;n.scaleX=g;n.scaleY=h;n.rotate=f;n.skewX=k;n.skewY=e;n.alpha=d;n.blendMode=m;this.frameInfos.push(n)};
var FlashMovieClip=function(){base(this,LSprite,[]);this._isFlashMovieClip=!0;this.timeline=[];this.currentFrame=1;this._lastShowIndex=this._lastFrameIndex=0;this.totalFrames=1;this._frameLabel={};this.isFront=this.isPlaying=!0;this.userLayer=[];this.frameChildren=[];this.scriptLayer=[];this.maskArray=[];this._isNeedUpdata=!0};FlashMovieClip.prototype._isFlashMovieClip=!0;FlashMovieClip.prototype.stop=function(){this._isNeedUpdata=!0;this.isPlaying=!1};
FlashMovieClip.prototype.as=function(a,c){this.scriptLayer[c]=a};FlashMovieClip.prototype.addFrameScript=function(a,c){this.as(c,a)};FlashMovieClip.prototype.a=function(){this._currentLayer=[];this.timeline.unshift(this._currentLayer);return this};
FlashMovieClip.prototype.b=function(a){this._currentLayerFrame=new FlashFrame;this._currentLayerFrame.keyFrameIndex=this._currentLayer.length;for(var c=0;c<a;c++)this._currentLayer.push(this._currentLayerFrame);this.totalFrames<this._currentLayer.length&&(this.totalFrames=this._currentLayer.length);return this};FlashMovieClip.prototype.c=function(a,c,b,d,g,h,f,k,e,m){this._currentLayerFrame.setDisplayInfo(a,c,b,d,g,h,f,k,e,m);return this};
FlashMovieClip.prototype.d=function(a,c){this._frameLabel[a]=c+1;return this};FlashMovieClip.prototype.e=function(a){this._currentLayerFrame.eventName=a;return this};FlashMovieClip.prototype.f=function(a,c,b){this._currentLayerFrame.soundName=c;this._currentLayerFrame.soundScene=a;this._currentLayerFrame.soundTimes=b;return this};
FlashMovieClip.prototype.nextFrame=function(){this.currentFrame<this.totalFrames&&(this.parent&&this.parent._isFlashMovieClip&&(this._lastShowIndex=this.parent._lastFrameIndex),this.currentFrame++,this._isNeedUpdata=!0);this.isPlaying=!1};FlashMovieClip.prototype.prevFrame=function(){1<this.currentFrame&&(this.parent&&this.parent._isFlashMovieClip&&(this._lastShowIndex=this.parent._lastFrameIndex),this.currentFrame--,this._isNeedUpdata=!0);this.isPlaying=!1};
FlashMovieClip.prototype.gotoAndStop=function(a){this.parent&&this.parent._isFlashMovieClip&&(this._lastShowIndex=this.parent._lastFrameIndex);this.isPlaying=!1;var c;"string"==typeof a?void 0!=this._frameLabel[a]&&(c=this._frameLabel[a]):"number"==typeof a&&(a>this.totalFrames&&(a=this.totalFrames),1>a&&(a=1),c=a);this._isNeedUpdata=!0;this.currentFrame!=c&&(this.currentFrame=c)};FlashMovieClip.prototype.play=function(){this.isFront=this.isPlaying=!0};
FlashMovieClip.prototype.backPlay=function(){this.isPlaying=!0;this.isFront=!1};FlashMovieClip.prototype.gotoAndPlay=function(a,c){this._lastShowIndex=this.parent&&this.parent._isFlashMovieClip?this.parent._lastFrameIndex:0;this.isFront=void 0==c?!0:c;this.isPlaying=!0;var b;"string"==typeof a?void 0!=this._frameLabel[a]&&(b=this._frameLabel[a]):"number"==typeof a&&(a>this.totalFrames&&(a=this.totalFrames),1>a&&(a=1),b=a);this._isNeedUpdata=!0;this.currentFrame!=b&&(this.currentFrame=b)};
FlashMovieClip.prototype.addLayerChild=function(a){var c=this.userLayer.indexOf(a);0>c||this.userLayer.splice(c,1);this.userLayer.push(a)};FlashMovieClip.prototype.addLayerChildAt=function(a,c){var b=this.userLayer.indexOf(a);0<b&&this.userLayer.splice(b,1);c>=this.userLayer.length&&(c=this.userLayer.length-1);this.userLayer.splice(c,0,a)};FlashMovieClip.prototype.removeLayerChildAt=function(a){a=this.userLayer.indexOf(a);0<=a&&this.userLayer.splice(a,1)};
FlashMovieClip.prototype.removeLayerChildAt=function(a){a>=this.userLayer.length&&(a=this.userLayer.length-1);this.userLayer.splice(a,1)};FlashMovieClip.prototype.getLayerChildByName=function(a){for(var c=this.frameChildren.length,b=0;b<c;b++)if(this.frameChildren[b].name==a)return this.frameChildren[b];for(b=0;b<c;b++)if(this.userLayer[b].name==a)return this.userLayer[b];return null};FlashMovieClip.prototype.die=function(){};
FlashMovieClip.prototype.setChildAttr=function(a,c){a._donotUpdateinMC=a._donotUpdateinMC||{};for(var b in c)a._donotUpdateinMC[b]=c[b]};FlashMovieClip.prototype.delChildAttr=function(a,c){a._donotUpdateinMC=a._donotUpdateinMC||{};for(var b=0;b<c.length;b++)void 0!=a._donotUpdateinMC[c[b]]&&delete a._donotUpdateinMC[c[b]]};
FlashMovieClip.prototype.ll_show=function(){this.isPlaying&&0<this._lastFrameIndex&&(this.isFront?(this.currentFrame++,this.currentFrame>this.totalFrames&&(this.currentFrame=1)):(this.currentFrame--,1>this.currentFrame&&(this.currentFrame=this.totalFrames)),this._isNeedUpdata=!0);LSprite.prototype.ll_show.call(this)};
FlashMovieClip.prototype._showReady=function(a){if(this._isNeedUpdata){if(void 0!=this.scriptLayer[this.currentFrame-1])this.scriptLayer[this.currentFrame-1]();for(var c=this.maskArray.length,b=0;b<c;b++)this.maskArray[b].gotoAndStop(this.currentFrame);var c=this.timeline.length,d=0,g=d=null,h=null,f=0;this.childList=[];for(b=0;b<c;b++)if(d=this.timeline[b].length,this.currentFrame<=d&&(d=this.timeline[b][this.currentFrame-1],void 0!=d)){if(d.keyFrameIndex==this.currentFrame-1&&(""!=d.soundName&&
Flash2x.playSound(d.soundScene,d.soundName,d.soundTimes),""!=d.eventName&&void 0!=this.onFrameEvent))this.onFrameEvent(this.currentFrame,d.eventName);for(var f=d.frameInfos.length,k=0;k<f;k++){h=d.frameInfos[k];g=h.display;g.x=h.x;g.y=h.y;g.scaleX=h.scaleX;g.scaleY=h.scaleY;g.rotate=h.rotate;g.skewX=h.skewX;g.skewY=h.skewY;g.alpha=h.alpha;g.blendMode=h.blendMode;if(void 0!=g._donotUpdateinMC)for(var e in g._donotUpdateinMC)void 0!=g._donotUpdateinMC[e]&&(g[e]=g._donotUpdateinMC[e]);g._isFlashMovieClip&&
(g._lastShowIndex!=this._lastFrameIndex&&(g._lastFrameIndex=0,g.currentFrame=1,g.isPlaying=!0,g.isFront=!0,g._isNeedUpdata=!0),g._lastShowIndex=this.currentFrame);this.addChild(g)}}for(b=0;b<this.userLayer.length;b++)this.addChild(this.userLayer[b]);this._lastFrameIndex=this.currentFrame;this._isNeedUpdata=!1}LSprite.prototype._showReady.call(this,a)};var Flash2x=Flash2x||{};Flash2x._loadGroup={};Flash2x.isLoadedScene=function(a){if(a)for(var c=a.length-1;0<=c;c--)if(null!=Flash2x[a[c]+"ResultData"])a.splice(c,0);else{var b=Flash2x[a[c]+"LoadData"];if(b&&0<b.length)return!0}return!1};Flash2x.loadScene=function(a,c,b){var d=null,d="string"==typeof a?[a]:a;Flash2x.isLoadedScene(d)?(Flash2x._loadGroup={sceneName:d,progressFun:c,completeFun:b},Flash2x._loadMerge(d)):b&&b()};
Flash2x._loadMerge=function(a){for(var c=[],b=0,d=0;d<a.length;d++){var g=Flash2x[a[d]+"LoadData"];g&&0<g.length&&(b+=g.length,g.name=a[d],c.push(g))}Flash2x._loadItemResource(c,b)};
Flash2x._loadItemResource=function(a,c){var b=a.splice(0,1)[0];b.lastProgress||(b.lastProgress=0);LLoadManage.load(b,function(a){Flash2x._loadGroup.progressFun&&(b.progress=Math.floor(b.length*a/c)+b.lastProgress,Flash2x._loadGroup.progressFun(b.progress))},function(d){Flash2x[b.name+"ResultData"]={};for(var g in d)Flash2x[b.name+"ResultData"][g]=d[g];0==a.length?Flash2x._loadGroup.completeFun&&Flash2x._loadGroup.completeFun():(a[0].lastProgress=b.progress,Flash2x._loadItemResource(a,c))})};
Flash2x.createBitmapByName=function(a,c){if(void 0==Flash2x[a+"BitmapDatas"][c])if(Flash2x[a+"ResultData"][c])Flash2x[a+"BitmapDatas"][c]=new LBitmapData(Flash2x[a+"ResultData"][c]);else{var b=!1;if(Flash2x[a+"SSData"])for(var d=Flash2x[a+"SSData"].length,g=0;g<d;g++)if(Flash2x[a+"SSData"][g][c]){b=!0;d=Flash2x[a+"SSData"][g][c];Flash2x[a+"BitmapDatas"][c]=new LBitmapData(Flash2x[a+"ResultData"][a+"_SS"+g],d.x,d.y,d.w,d.h,LBitmapData.DATA_CANVAS);break}if(!b)return console.log(""+a+""+c+""),
null}return new LBitmap(Flash2x[a+"BitmapDatas"][c])};Flash2x.playSound=function(a,c,b){void 0==b&&(b=1);"loop"==b&&(b=Number.MAX_VALUE);(a=Flash2x[a+"ResultData"][c])&&(new LSound(a)).play(0,b)};
Flash2x.setDisplayInfo=function(a,c,b,d,g,h,f,k,e,m){void 0==c&&(c=0);void 0==b&&(b=0);void 0==g&&(g=1);void 0==h&&(h=1);void 0==f&&(f=0);void 0==k&&(k=0);void 0==e&&(e=0);void 0==d&&(d=1);void 0==m&&(a.blendMode="normal");a.x=c;a.y=b;a.scaleX=g;a.scaleY=h;a.rotate=f;a.skewX=k;a.skewY=e;a.alpha=d;a.blendMode=m};Flash2x.removeSceneResource=function(a){Flash2x[a+"BitmapDatas"]=null;Flash2x[a+"Sounds"]=null;Flash2x[a+"ResultData"]=null};
Flash2x.setQcode=function(a,c){setTimeout(function(){a.visible=!1;var b=a.bitmapData.image;b.style.position="absolute";b.style.left="0";b.style.webkitTransformOrigin="0% 0%";b.style.webkitTransform="scale("+a.getAbsoluteScale().scaleX+")";b.setAttribute("id",c);document.getElementsByTagName("body")[0].appendChild(b);var d=a.getRootCoordinate();b.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+(d.y*parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>>0)+(1-LGlobal.stage.scaleX)+
"px";b.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginTop)+d.x+"px"}.bind(this),0)};Flash2x.removeQcode=function(a,c){setTimeout(function(){a.visible=!0;var b=document.getElementById(c);b&&document.getElementsByTagName("body")[0].removeChild(b)}.bind(this),0)};